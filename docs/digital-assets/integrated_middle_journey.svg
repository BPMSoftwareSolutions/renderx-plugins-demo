<svg viewBox="0 0 600 200" xmlns="http://www.w3.org/2000/svg">
  <!-- Background road -->
  <g id="road-layer">
    <!-- Sky background -->
    <rect x="0" y="0" width="600" height="100" fill="#87CEEB"/>
    <!-- Ground/grass -->
    <rect x="0" y="100" width="600" height="100" fill="#4A6B3A"/>
    <!-- Road surface with perspective -->
    <polygon points="0,120 600,150 600,170 0,140" fill="#404040"/>
    <!-- Road shoulders -->
    <polygon points="0,117 600,147 600,150 0,120" fill="#606060"/>
    <polygon points="0,140 600,170 600,173 0,143" fill="#606060"/>
    <!-- Yellow center line with perspective (subset) -->
    <g fill="#FFFF00">
      <polygon points="0,130 25,138 25,139 0,131"/>
      <polygon points="35,139 60,142 60,143 35,140"/>
      <polygon points="70,143 95,145 95,146 70,144"/>
      <polygon points="105,146 130,147.5 130,148.5 105,147"/>
      <polygon points="140,148 165,149 165,149.8 140,148.8"/>
    </g>
    <!-- White edge lines -->
    <polygon points="0,122 600,152 600,152.5 0,122.5" fill="#FFFFFF"/>
    <polygon points="0,138 600,168 600,168.5 0,138.5" fill="#FFFFFF"/>
  </g>

  <!-- Guard rails (aligned near road bottom) -->
  <g id="guard-rails" transform="translate(0, 40)">
    <!-- Ground/grass from guard rail asset -->
    <rect x="0" y="120" width="600" height="80" fill="#4A6B3A"/>
    <!-- Posts -->
    <g fill="#C0C0C0" stroke="#A0A0A0" stroke-width="1">
      <rect x="48" y="100" width="4" height="30" rx="2"/>
      <rect x="98" y="100" width="4" height="30" rx="2"/>
      <rect x="148" y="100" width="4" height="30" rx="2"/>
      <rect x="198" y="100" width="4" height="30" rx="2"/>
      <rect x="248" y="100" width="4" height="30" rx="2"/>
      <rect x="298" y="100" width="4" height="30" rx="2"/>
      <rect x="348" y="100" width="4" height="30" rx="2"/>
      <rect x="398" y="100" width="4" height="30" rx="2"/>
      <rect x="448" y="100" width="4" height="30" rx="2"/>
      <rect x="498" y="100" width="4" height="30" rx="2"/>
      <rect x="548" y="100" width="4" height="30" rx="2"/>
    </g>
    <!-- Main rail -->
    <rect x="0" y="105" width="600" height="12" fill="#E0E0E0" stroke="#C0C0C0" stroke-width="1"/>
    <!-- Corrugation lines -->
    <g stroke="#D0D0D0" stroke-width="0.5" opacity="0.7">
      <line x1="0" y1="107" x2="600" y2="107"/>
      <line x1="0" y1="109" x2="600" y2="109"/>
      <line x1="0" y1="111" x2="600" y2="111"/>
      <line x1="0" y1="113" x2="600" y2="113"/>
      <line x1="0" y1="115" x2="600" y2="115"/>
    </g>
  </g>

  <!-- Traffic light (scaled and positioned at right shoulder) -->
  <g id="traffic-light" transform="translate(520, 0) scale(0.5)">
    <rect x="90" y="280" width="20" height="120" fill="#666" stroke="#444" stroke-width="2"/>
    <rect x="50" y="50" width="100" height="240" rx="15" ry="15" fill="#333" stroke="#222" stroke-width="3"/>
    <rect x="55" y="55" width="90" height="230" rx="10" ry="10" fill="#444"/>
    <circle cx="100" cy="100" r="30" fill="#222" stroke="#111" stroke-width="2"/>
    <circle cx="100" cy="170" r="30" fill="#222" stroke="#111" stroke-width="2"/>
    <circle cx="100" cy="240" r="30" fill="#222" stroke="#111" stroke-width="2"/>
    <circle cx="100" cy="100" r="25" fill="#800000" stroke="#600000" stroke-width="2">
      <animate attributeName="fill" values="#FF0000;#FF0000;#800000;#800000;#800000;#800000" dur="9s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="1;1;0.3;0.3;0.3;0.3" dur="9s" repeatCount="indefinite"/>
    </circle>
    <circle cx="100" cy="170" r="25" fill="#806000" stroke="#604000" stroke-width="2">
      <animate attributeName="fill" values="#806000;#806000;#FFFF00;#FFFF00;#806000;#806000" dur="9s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.3;0.3;1;1;0.3;0.3" dur="9s" repeatCount="indefinite"/>
    </circle>
    <circle cx="100" cy="240" r="25" fill="#004000" stroke="#003000" stroke-width="2">
      <animate attributeName="fill" values="#004000;#004000;#004000;#004000;#00FF00;#00FF00" dur="9s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.3;0.3;0.3;0.3;1;1" dur="9s" repeatCount="indefinite"/>
    </circle>
  </g>

  <!-- Updated street signs set -->
  <g id="street-sign-debug" transform="translate(40, 40) scale(0.7)">
    <rect x="145" y="90" width="10" height="60" fill="#666" stroke="#444" stroke-width="1"/>
    <rect x="10" y="10" width="280" height="80" rx="8" ry="8" fill="#006747" stroke="#FFFFFF" stroke-width="3"/>
    <rect x="18" y="18" width="264" height="64" rx="4" ry="4" fill="none" stroke="#FFFFFF" stroke-width="2"/>
    <text x="150" y="50" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#FFFFFF">DEBUG LOGS AHEAD</text>
  </g>
  <g id="street-sign-replay" transform="translate(220, 45) scale(0.7)">
    <rect x="145" y="90" width="10" height="60" fill="#666" stroke="#444" stroke-width="1"/>
    <rect x="10" y="10" width="280" height="80" rx="8" ry="8" fill="#006747" stroke="#FFFFFF" stroke-width="3"/>
    <rect x="18" y="18" width="264" height="64" rx="4" ry="4" fill="none" stroke="#FFFFFF" stroke-width="2"/>
    <text x="150" y="50" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#FFFFFF">REPLAY CACHE STOP</text>
  </g>
  <g id="street-sign-feature-flags" transform="translate(400, 50) scale(0.7)">
    <rect x="145" y="90" width="10" height="60" fill="#666" stroke="#444" stroke-width="1"/>
    <rect x="10" y="10" width="280" height="80" rx="8" ry="8" fill="#006747" stroke="#FFFFFF" stroke-width="3"/>
    <rect x="18" y="18" width="264" height="64" rx="4" ry="4" fill="none" stroke="#FFFFFF" stroke-width="2"/>
    <text x="150" y="50" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#FFFFFF">FEATURE FLAGS ON/OFF</text>
  </g>

  <!-- Bus layer: scaled and aligned to road, animated horizontally -->
  <g id="bus-layer" transform="translate(0, 25) scale(0.8)">
    <g>
      <animateTransform attributeName="transform" type="translate" values="-400,0;1000,0" dur="18s" repeatCount="indefinite"/>
      <rect x="70" y="60" width="280" height="80" rx="8" ry="8" fill="#FFD700" stroke="#E6C200" stroke-width="2"/>
      <rect x="340" y="70" width="20" height="60" rx="10" ry="10" fill="#FFD700" stroke="#E6C200" stroke-width="2"/>
      <rect x="65" y="55" width="290" height="10" rx="5" ry="5" fill="#FFA500"/>
      <rect x="350" y="125" width="15" height="8" rx="4" ry="4" fill="#C0C0C0"/>
      <rect x="342" y="75" width="16" height="20" rx="2" ry="2" fill="#2F4F4F" opacity="0.8"/>
      <rect x="305" y="70" width="25" height="20" rx="2" ry="2" fill="#2F4F4F" opacity="0.8"/>
      <rect x="275" y="70" width="25" height="20" rx="2" ry="2" fill="#2F4F4F" opacity="0.8"/>
      <rect x="245" y="70" width="25" height="20" rx="2" ry="2" fill="#2F4F4F" opacity="0.8"/>
      <rect x="215" y="70" width="25" height="20" rx="2" ry="2" fill="#2F4F4F" opacity="0.8"/>
      <rect x="185" y="70" width="25" height="20" rx="2" ry="2" fill="#2F4F4F" opacity="0.8"/>
      <rect x="155" y="70" width="25" height="20" rx="2" ry="2" fill="#2F4F4F" opacity="0.8"/>
      <rect x="125" y="70" width="25" height="20" rx="2" ry="2" fill="#2F4F4F" opacity="0.8"/>
      <rect x="95" y="70" width="25" height="20" rx="2" ry="2" fill="#2F4F4F" opacity="0.8"/>
      <rect x="75" y="75" width="15" height="15" rx="2" ry="2" fill="#2F4F4F" opacity="0.8"/>
      <rect x="315" y="95" width="20" height="35" rx="2" ry="2" fill="#E6C200" stroke="#D4AF37" stroke-width="1"/>
      <rect x="317" y="97" width="16" height="15" rx="1" ry="1" fill="#2F4F4F" opacity="0.8"/>
      <circle cx="319" cy="112" r="1.5" fill="#000"/>
      <text x="200" y="110" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#000">EVENT BUS</text>
      <circle cx="353" cy="80" r="3" fill="#FFFF00"/>
      <circle cx="353" cy="120" r="3" fill="#FF4500"/>
      <rect x="69" y="77" width="6" height="8" rx="3" ry="3" fill="#FF0000"/>
      <rect x="69" y="110" width="6" height="8" rx="3" ry="3" fill="#FF0000"/>
      <g>
        <circle cx="310" cy="155" r="20" fill="#2F2F2F" stroke="#000" stroke-width="2"/>
        <circle cx="310" cy="155" r="15" fill="#4F4F4F"/>
        <circle cx="310" cy="155" r="8" fill="#696969"/>
        <circle cx="310" cy="155" r="3" fill="#2F2F2F"/>
        <circle cx="110" cy="155" r="20" fill="#2F2F2F" stroke="#000" stroke-width="2"/>
        <circle cx="110" cy="155" r="15" fill="#4F4F4F"/>
        <circle cx="110" cy="155" r="8" fill="#696969"/>
        <circle cx="110" cy="155" r="3" fill="#2F2F2F"/>
      </g>
    </g>
  </g>
</svg>

