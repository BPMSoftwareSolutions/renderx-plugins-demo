{
  "version": "1.0.0",
  "generatedAt": "2025-11-24T22:00:00Z",
  "scope": "REPOSITORY-WIDE",
  "policy": "JSON-DRIVEN AUTOMATION - Master Governance Framework",
  "principle": "Single source of truth is JSON; All other files are auto-generated reflections",
  
  "policyStatement": {
    "core": "NO MANUAL DOCUMENTATION CREATION - All files must be auto-generated from JSON authorities",
    "scope": "Applies to entire renderx-plugins-demo repository and all packages",
    "enforcement": "Multi-layer (pre-commit, build-time, CI/CD, audit)",
    "compliance": "MANDATORY - No exceptions except explicitly authorized"
  },

  "governance_hierarchy": {
    "level_1_repository_root": {
      "scope": "renderx-plugins-demo/",
      "authority": "This file (MASTER_GOVERNANCE_AUTHORITY.json)",
      "policy": "Repository-wide JSON-driven automation",
      "managed_by": "Central governance system"
    },
    "level_2_package": {
      "scope": "renderx-plugins-demo/packages/*/",
      "authority": "[package]/PACKAGE_GOVERNANCE_AUTHORITY.json or inherited",
      "policy": "Inherits repository policy + package-specific rules",
      "managed_by": "Package governance (inherits from repository)"
    },
    "level_3_directory": {
      "scope": "renderx-plugins-demo/packages/*/docs/",
      "authority": "[package]/docs/GOVERNANCE.json",
      "policy": "Inherits package policy + directory-specific rules",
      "managed_by": "Directory governance (inherits from package)"
    }
  },

  "cascade_model": {
    "inheritance": [
      "Repository Policy (MASTER_GOVERNANCE_AUTHORITY.json)",
      "  ↓",
      "Package Policy (PACKAGE_GOVERNANCE_AUTHORITY.json or inherited)",
      "  ↓",
      "Directory Policy (GOVERNANCE.json or inherited)"
    ],
    "principle": "More specific rules override general rules",
    "conflict_resolution": "Package rules override repository rules only when explicitly documented"
  },

  "json_authorities_repository_level": {
    "MASTER_GOVERNANCE_AUTHORITY.json": {
      "scope": "Repository-wide policy",
      "location": "renderx-plugins-demo/",
      "purpose": "Define automation policy for entire repository",
      "immutability": "LOCKED - Changes require governance review",
      "applies_to": "All packages and projects"
    },
    "knowledge-index.json": {
      "scope": "Repository-wide index",
      "location": "renderx-plugins-demo/",
      "purpose": "Catalog of all projects with governance status",
      "immutability": "AUTO-UPDATED - Generated from package manifests",
      "applies_to": "Repository-wide project discovery"
    },
    "GOVERNANCE_FRAMEWORK.json": {
      "scope": "Repository-wide framework",
      "location": "renderx-plugins-demo/.generated/",
      "purpose": "Governance rules, layers, and enforcement strategy",
      "immutability": "LOCKED - Changes require governance review",
      "applies_to": "All enforcement mechanisms"
    }
  },

  "json_authorities_package_level": {
    "pattern": "[package]/PACKAGE_GOVERNANCE_AUTHORITY.json",
    "scope": "Package-specific rules and overrides",
    "example": "packages/slo-dashboard/PACKAGE_GOVERNANCE_AUTHORITY.json",
    "or_alternate": "[package]/.generated/PACKAGE_GOVERNANCE_AUTHORITY.json",
    "inherits_from": "MASTER_GOVERNANCE_AUTHORITY.json",
    "can_override": ["file_placement_rules", "allowed_manual_files", "generation_frequency"],
    "cannot_override": ["core_policy", "enforcement_layers"]
  },

  "auto_generated_file_categories": {
    "category_1_documentation": {
      "pattern": "**/.generated/*.md",
      "rule": "ALL markdown files in .generated/ must be auto-generated",
      "generators": ["generate-context-tree.js", "generate-summary.js"],
      "exceptions": "NONE"
    },
    "category_2_indexes": {
      "pattern": "**/.generated/*-index*.json",
      "rule": "All index JSON files auto-generated from source manifests",
      "generators": ["generate-index.js"],
      "exceptions": "NONE"
    },
    "category_3_test_stubs": {
      "pattern": "**/__tests__/**/*.generated.spec.ts",
      "rule": "Test files with .generated. pattern must be auto-generated from specs",
      "generators": ["generate-bdd-tests.js"],
      "exceptions": "NONE"
    },
    "category_4_implementation_stubs": {
      "pattern": "**/src/**/*.stub.ts",
      "rule": "Implementation stubs with .stub. pattern auto-generated from specs",
      "generators": ["generate-implementation-stubs.js"],
      "exceptions": "NONE"
    },
    "category_5_configuration": {
      "pattern": "**/.generated/*.config.json",
      "rule": "Configuration JSON files auto-generated from authority files",
      "generators": ["generate-configs.js"],
      "exceptions": "NONE"
    }
  },

  "manual_file_exceptions": {
    "authorized_manual_markdown": [
      "README.md (package/project root - entry point)",
      "LICENSE (repository root)",
      "RECOVERY_REPORT.md (recovery history)",
      "docs/**/*.md (manual documentation - explicitly authored)"
    ],
    "authorized_manual_json": [
      "package.json (npm configuration)",
      "tsconfig.json (TypeScript configuration)",
      "*-project-plan.json (project authority)",
      "*-specifications.json (specifications authority)",
      "*-governance.json (governance authority)"
    ],
    "rule": "Manual files MUST NOT use auto-generation patterns (.generated., .generated/, .generated-*, etc.)",
    "validation": "Filenames indicate source: .generated pattern = must be auto-generated"
  },

  "enforcement_layers_repository_wide": {
    "layer_1_filename_convention": {
      "name": "Filename Convention Enforcement",
      "trigger": "File creation (pre-commit)",
      "rule": "Files matching auto-generation patterns MUST have generator headers",
      "enforcement": "Script scans filenames and validates generator metadata",
      "action": "BLOCK if .generated file has no generator header"
    },
    "layer_2_pre_commit_hook": {
      "name": "Pre-Commit Governance",
      "trigger": "Before git commit",
      "rule": "No manual markdown in .generated/ or .generated* files",
      "enforcement": "prevent-manual-documentation.sh scans staged changes",
      "action": "BLOCK commit if violations found"
    },
    "layer_3_build_time_validation": {
      "name": "Build-Time Verification",
      "trigger": "npm run build or npm run pretest",
      "rule": "All auto-generated files must match freshly generated versions",
      "enforcement": "Regenerate all .generated files and compare checksums",
      "action": "FAIL build if any .generated file outdated or manual"
    },
    "layer_4_ci_cd_enforcement": {
      "name": "CI/CD Pipeline",
      "trigger": "Before PR merge",
      "rule": "Repository-wide governance audit must pass",
      "enforcement": "ci/verify-governance.yml runs full compliance check",
      "action": "BLOCK merge if governance violations found"
    },
    "layer_5_continuous_audit": {
      "name": "Continuous Audit",
      "trigger": "Scheduled (daily/weekly) or on-demand",
      "rule": "Regular audit of all governance compliance",
      "enforcement": "npm run audit:governance generates report",
      "action": "Report violations to team + block builds"
    }
  },

  "generator_architecture": {
    "repository_level_orchestrator": {
      "name": "generate-all-documentation.js",
      "location": "renderx-plugins-demo/scripts/",
      "scope": "Orchestrates generation across entire repository",
      "usage": "npm run generate:all (from repo root)",
      "discovers": "All packages with PACKAGE_GOVERNANCE_AUTHORITY.json",
      "generates": "All .generated files in all packages",
      "reports": "Repository-wide generation summary"
    },
    "package_level_orchestrator": {
      "name": "generate-markdown.js (per package)",
      "location": "[package]/scripts/",
      "scope": "Generates within package",
      "usage": "npm run generate:all (from package root)",
      "generates": "Package-specific .generated files",
      "reports": "Package-level generation summary"
    },
    "verification_orchestrator": {
      "name": "verify-governance.js",
      "location": "renderx-plugins-demo/scripts/",
      "scope": "Verifies governance across entire repository",
      "usage": "npm run verify:governance (from repo root)",
      "checks": [
        "All packages have governance authority",
        "No manual .generated files",
        "All checksums current",
        "All enforcement layers active"
      ],
      "reports": "Repository-wide compliance dashboard"
    }
  },

  "implementation_roadmap": {
    "phase_1_establish_master_authority": {
      "timeline": "NOW",
      "tasks": [
        "Create MASTER_GOVERNANCE_AUTHORITY.json (this file)",
        "Create GOVERNANCE_FRAMEWORK.json with rules",
        "Document cascade model",
        "Define enforcement layers"
      ],
      "status": "✅ COMPLETE"
    },
    "phase_2_per_package_authorities": {
      "timeline": "This session + next sessions",
      "tasks": [
        "Create slo-dashboard/PACKAGE_GOVERNANCE_AUTHORITY.json",
        "Create other packages' governance authorities",
        "Define package-specific overrides where needed",
        "Document all governance files"
      ],
      "status": "⏳ IN-PROGRESS (slo-dashboard complete)"
    },
    "phase_3_repository_orchestrators": {
      "timeline": "Next session",
      "tasks": [
        "Create generate-all-documentation.js (repo-wide)",
        "Create verify-governance.js (repo-wide)",
        "Integrate with monorepo structure",
        "Test across all packages"
      ],
      "status": "⏱️ PENDING"
    },
    "phase_4_enforcement_activation": {
      "timeline": "Next session",
      "tasks": [
        "Activate pre-commit hooks",
        "Activate build-time validation",
        "Activate CI/CD enforcement",
        "Document for all agents"
      ],
      "status": "⏱️ PENDING"
    },
    "phase_5_compliance_audit": {
      "timeline": "After enforcement active",
      "tasks": [
        "Audit entire repository",
        "Generate compliance report",
        "Fix remaining violations",
        "Achieve 100% compliance"
      ],
      "status": "⏱️ PENDING"
    }
  },

  "repository_structure": {
    "root_governance_files": {
      "MASTER_GOVERNANCE_AUTHORITY.json": "Repository-wide policy (THIS FILE)",
      ".generated/GOVERNANCE_FRAMEWORK.json": "Detailed governance rules and layers",
      ".generated/GOVERNANCE_IMPLEMENTATION_PLAN.md": "Implementation guide",
      "scripts/generate-all-documentation.js": "Repository-wide generator orchestrator",
      "scripts/verify-governance.js": "Repository-wide verification"
    },
    "package_governance_files": {
      "packages/*/PACKAGE_GOVERNANCE_AUTHORITY.json": "Package-specific policy",
      "packages/*/.generated/PACKAGE_GOVERNANCE_AUTHORITY.json": "Or here (alternate location)",
      "packages/*/scripts/generate-markdown.js": "Package generator (if exists)",
      "packages/*/scripts/verify-markdown-governance.js": "Package verification (if exists)"
    },
    "documentation_files": {
      ".generated/GOVERNANCE_DOCUMENTATION.md": "How to use governance system",
      ".generated/GENERATOR_GUIDE.md": "How to write generators",
      ".generated/COMPLIANCE_GUIDE.md": "How to achieve compliance",
      ".generated/GOVERNANCE_REPORT.md": "Current compliance status"
    }
  },

  "current_project_status": {
    "slo_dashboard": {
      "package": "packages/slo-dashboard/",
      "governance_authority": "PACKAGE_GOVERNANCE_AUTHORITY.json",
      "status": "✅ GOVERNANCE ESTABLISHED",
      "generators": [
        "generate-markdown.js (context tree, session summary, etc.)"
      ],
      "verification": "verify-markdown-governance.js",
      "violations": 5,
      "remediation_status": "Ready for next session: npm run verify:markdown-governance:fix"
    },
    "other_packages": {
      "status": "⏳ TO BE AUDITED",
      "action": "Scan each package for auto-generated files",
      "next_step": "Create PACKAGE_GOVERNANCE_AUTHORITY.json for each"
    }
  },

  "discovery_and_catalog": {
    "auto_discovery_process": {
      "scan_packages": "Find all directories with auto-generated files",
      "identify_patterns": "Look for .generated/, .generated.*, etc. patterns",
      "analyze_content": "Determine what should be auto-generated",
      "create_authority": "Create PACKAGE_GOVERNANCE_AUTHORITY.json",
      "register": "Add to knowledge-index.json"
    },
    "knowledge_index_json": {
      "location": "renderx-plugins-demo/knowledge-index.json",
      "purpose": "Repository-wide catalog of all projects with governance status",
      "auto_updated": true,
      "contains": [
        "List of all packages",
        "Governance status (compliant, violations)",
        "Auto-generation patterns used",
        "Last audit timestamp"
      ]
    }
  },

  "policy_enforcement_rules": {
    "rule_1_no_manual_generated_files": {
      "rule": "NO manual creation of files matching auto-generation patterns",
      "patterns": ["*.generated.*", ".generated/*", ".generated*"],
      "enforcement": "BLOCK at all 5 layers",
      "exception": "NONE"
    },
    "rule_2_always_regenerate": {
      "rule": "Before every build, regenerate all .generated files from JSON",
      "command": "npm run generate:all (from repo root)",
      "enforcement": "Build FAILS if not done",
      "exception": "NONE"
    },
    "rule_3_json_is_authority": {
      "rule": "JSON authorities are the ONLY source of truth",
      "applies_to": "Project plans, specifications, governance",
      "enforcement": "All other files derived from JSON",
      "exception": "NONE - JSON authorities are immutable"
    },
    "rule_4_governance_files_locked": {
      "rule": "All *-governance.json and *-plan.json files are LOCKED",
      "modification": "Requires governance review board approval",
      "enforcement": "Pre-commit hook prevents direct modification",
      "exception": "Update process documented and authorized"
    },
    "rule_5_versioning": {
      "rule": "All governance files versioned with timestamps and checksums",
      "enforcement": "Auto-validated by verification scripts",
      "exception": "NONE"
    }
  },

  "compliance_dashboard": {
    "repository_wide_metrics": {
      "total_packages": "TO BE SCANNED",
      "packages_with_governance": "1 (slo-dashboard)",
      "packages_compliant": "0 (slo-dashboard violations: 5)",
      "packages_pending_audit": "UNKNOWN",
      "compliance_rate": "PENDING FULL AUDIT"
    },
    "governance_gaps": {
      "missing_authorities": "Need PACKAGE_GOVERNANCE_AUTHORITY.json for all packages",
      "missing_generators": "Need generators for auto-generated file types",
      "missing_verification": "Need verification scripts for enforcement",
      "missing_documentation": "Need governance documentation for agents"
    }
  },

  "next_agent_instructions": {
    "understanding": {
      "step_1": "Read this file (MASTER_GOVERNANCE_AUTHORITY.json)",
      "step_2": "Understand cascade model (repo → package → directory)",
      "step_3": "Understand JSON authorities are source of truth",
      "step_4": "Understand all documentation auto-generated from JSON"
    },
    "actions": {
      "step_1": "Scan all packages for auto-generated files",
      "step_2": "Create PACKAGE_GOVERNANCE_AUTHORITY.json for each",
      "step_3": "Create generators for identified patterns",
      "step_4": "Create verification scripts",
      "step_5": "Integrate into build pipeline",
      "step_6": "Fix violations and achieve 100% compliance"
    },
    "enforcement": {
      "step_1": "Activate pre-commit hooks",
      "step_2": "Activate build-time validation",
      "step_3": "Activate CI/CD enforcement",
      "step_4": "Document policy for future agents",
      "step_5": "Maintain continuous audit"
    }
  },

  "success_criteria": {
    "phase_2_package_authorities": {
      "goal": "100% of packages have PACKAGE_GOVERNANCE_AUTHORITY.json",
      "metric": "All packages discovered and cataloged",
      "validation": "knowledge-index.json lists all packages"
    },
    "phase_3_generators": {
      "goal": "All auto-generated file patterns have generators",
      "metric": "Zero manual .generated files",
      "validation": "Full repository scan shows 0 manual violations"
    },
    "phase_4_enforcement": {
      "goal": "All 5 enforcement layers active",
      "metric": "Pre-commit, build-time, CI/CD all working",
      "validation": "Attempted manual creation blocked at each layer"
    },
    "phase_5_compliance": {
      "goal": "100% compliance across entire repository",
      "metric": "Governance report shows 0 violations",
      "validation": "Repository-wide audit passes"
    }
  },

  "governance_policies_by_file_type": {
    "markdown_files": {
      "pattern": "*.md in .generated/",
      "rule": "100% auto-generated from JSON",
      "source": "*-project-plan.json, *-specifications.json",
      "generators": ["generate-context-tree.js", "generate-summary.js"],
      "enforcement": "All 5 layers"
    },
    "test_files": {
      "pattern": "*.generated.spec.ts in __tests__/",
      "rule": "100% auto-generated from specifications",
      "source": "*-specifications.json",
      "generators": ["generate-bdd-tests.js"],
      "enforcement": "All 5 layers"
    },
    "implementation_stubs": {
      "pattern": "*.stub.ts in src/",
      "rule": "100% auto-generated from specifications",
      "source": "*-specifications.json",
      "generators": ["generate-implementation-stubs.js"],
      "enforcement": "All 5 layers"
    },
    "configuration_files": {
      "pattern": "*.config.json in .generated/",
      "rule": "100% auto-generated from authority files",
      "source": "*-governance.json, *-project-plan.json",
      "generators": ["generate-configs.js"],
      "enforcement": "All 5 layers"
    },
    "index_files": {
      "pattern": "*-index.json in .generated/",
      "rule": "100% auto-generated from source catalogs",
      "source": "Source manifests and catalogs",
      "generators": ["generate-index.js"],
      "enforcement": "All 5 layers"
    }
  },

  "policy_statement_final": "From this point forward, renderx-plugins-demo operates under JSON-driven automation governance. NO manual files matching auto-generation patterns will be created. ALL such files must be auto-generated from JSON authorities. This policy applies repository-wide across all packages, with package-specific rules inheriting from this master authority. Enforcement is multi-layered (pre-commit, build-time, CI/CD, audit) and mandatory with no exceptions except explicitly documented authorized manual files."
}
