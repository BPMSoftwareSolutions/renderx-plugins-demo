const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HeaderThemeButtonView-JFN6IQZJ-qWUR_MEO.js","assets/EventRouter-DUQzZvsb.js"])))=>i.map(i=>d[i]);
import{_ as T}from"./global-CMa2Rm43.js";import{j as n,R as u}from"./EventRouter-DUQzZvsb.js";import{u as j}from"./Header-A6BR6KQZ-DYj0DEFE.js";import{r as g}from"./interactionManifest-BORsh5a3.js";function p(){try{if(typeof localStorage<"u"){const e=localStorage.getItem("theme");return e==="dark"||e==="light"?e:null}}catch{}return null}function y(e){try{typeof localStorage<"u"&&localStorage.setItem("theme",e)}catch{}}function v(e){return e==="dark"||e==="light"?e:null}function k(e,r){try{let t="dark";if(typeof document<"u"){const a=document.documentElement.getAttribute("data-theme"),c=v(a);if(c)t=c;else{const o=p();o&&(t=o)}document.documentElement.setAttribute("data-theme",t)}else{const a=p();a&&(t=a)}return y(t),r.payload.currentTheme=t,{theme:t}}catch(t){return r.logger?.warn?.("getCurrentTheme failed",t),r.payload.currentTheme="dark",{theme:"dark"}}}function S(e,r){try{const t=v(e?.theme)||"light";try{if(typeof document<"u"){const a=document.documentElement,c=typeof window<"u"&&window.requestAnimationFrame||null,o=()=>a.setAttribute("data-theme",t);c?c(()=>o()):o()}}catch{}try{r.payload.theme=t}catch{}return y(t),{theme:t}}catch(t){return r.logger?.warn?.("toggleTheme failed",t),{error:t}}}var I={getCurrentTheme:k,toggleTheme:S,notifyUi(e,r){const t=r?.payload?.currentTheme??r?.payload?.theme;try{e?.onTheme?.(t)}catch{}}};function A(){return n.jsx("div",{className:"header-container",children:n.jsx("div",{className:"header-title",children:"ðŸ”§ RenderX Plugins Demo"})})}function C(){return n.jsx("div",{className:"header-container",children:n.jsxs("div",{className:"header-controls",children:[n.jsx("button",{className:"header-button",title:"New",children:"New"}),n.jsx("button",{className:"header-button",title:"Open",children:"Open"}),n.jsx("button",{className:"header-button",title:"Save",children:"Save"})]})})}var _=typeof import.meta<"u"&&!!import.meta.vitest,b=u.forwardRef((e,r)=>null);b.displayName="HeaderThemeButtonShim";var x=_?b:u.lazy(()=>T(()=>import("./HeaderThemeButtonView-JFN6IQZJ-qWUR_MEO.js"),__vite__mapDeps([0,1])));function H(){const e=j(),[r,t]=u.useState(null),a=u.useRef(!1),c=u.useRef(!0),o=u.useRef(!1);u.useEffect(()=>()=>{c.current=!1},[]);const s=l=>{c.current&&t(l)},h=u.useCallback(l=>{if(!(!l||r!==null||a.current||!c.current)){a.current=!0;try{const i=g("app.ui.theme.get");e.play(i.pluginId,i.sequenceId,{onTheme:m=>{o.current||s(m)}},m=>{const d=m?.theme;!o.current&&(d==="light"||d==="dark")&&s(d)})}catch{o.current||s("dark")}}},[r,e]),f=async()=>{try{o.current=!0;const l=r==null||r==="light"?"dark":"light";s(l);const i=g("app.ui.theme.toggle"),d=(await e.play(i.pluginId,i.sequenceId,{theme:l}))?.theme||l;s(d)}catch{}};return n.jsx("div",{className:"header-container",children:n.jsx("div",{className:"header-theme-toggle",children:_?n.jsx("button",{ref:h,onClick:f,className:"header-theme-button",title:"Toggle Theme",children:r==="light"?"ðŸŒ™ Dark":"ðŸŒž Light"}):n.jsx(u.Suspense,{fallback:n.jsx("button",{ref:h,onClick:f,className:"header-theme-button",title:"Toggle Theme",children:r==="light"?"ðŸŒ™ Dark":"ðŸŒž Light"}),children:n.jsx(x,{ref:h,theme:r,onToggle:f})})})})}typeof document<"u"&&document&&typeof document.createElement=="function"&&T(()=>import("./Header-A6BR6KQZ-DYj0DEFE.js").then(e=>e.H),[]);async function F(e){}export{C as HeaderControls,H as HeaderThemeToggle,A as HeaderTitle,I as handlers,F as register};
