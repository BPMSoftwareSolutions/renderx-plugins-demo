import{ensureOverlay as j,applyOverlayRectForEl as C}from"./select.overlay.dom.stage-crew-T3p4uTrs.js";async function S($,E){const{id:y,path:g}=$||{};if(!y)return;const i=document.getElementById(String(y));if(!i)return;let n=i;if(typeof g=="string"&&g.trim().length){const e=g.split("/").map(t=>t.trim()).filter(Boolean).map(t=>Number(t)).filter(t=>Number.isFinite(t)&&t>=0);for(const t of e){const o=Array.from(n.children);if(!o.length||t>=o.length)break;n=o[t]}}const s=j();s.dataset.targetId=String(y),s.querySelectorAll(".rx-handle").forEach(e=>{e.style.display="none"});const O=e=>typeof e.ownerSVGElement<"u",h=i.style,b=parseFloat(h.left||"0")||0,w=parseFloat(h.top||"0")||0,l=parseFloat(h.width||"0")||0,c=parseFloat(h.height||"0")||0,_=i.tagName.toLowerCase()==="svg"?i:i.querySelector("svg"),k=e=>{if(!e)return[0,0,l||0,c||0];const o=(e.getAttribute("viewBox")||"").split(/[\s,]+/).map(r=>parseFloat(r));return o.length===4&&o.every(r=>Number.isFinite(r))?[o[0],o[1],o[2],o[3]]:[0,0,l||0,c||0]},[M,F,f,u]=k(_),p=f?(l||f)/f:1,d=u?(c||u)/u:1;let m=!1;if(O(n)&&_){const e=n.tagName.toLowerCase(),t=o=>parseFloat(n.getAttribute?.(o)||"0")||0;if(e==="rect"){const o=t("x"),r=t("y"),a=t("width"),x=t("height"),v=b+(o-M)*p,A=w+(r-F)*d;Object.assign(s.style,{left:`${Math.round(v)}px`,top:`${Math.round(A)}px`,width:`${Math.round(a*p)}px`,height:`${Math.round(x*d)}px`,display:"block"}),m=!0}else if(e==="circle"){const o=t("cx"),r=t("cy"),a=t("r"),x=b+(o-a-M)*p,v=w+(r-F)*d;Object.assign(s.style,{left:`${Math.round(x)}px`,top:`${Math.round(v)}px`,width:`${Math.round(2*a*p)}px`,height:`${Math.round(2*a*d)}px`,display:"block"}),m=!0}}if(!m){s.style.display="block",C(s,n);const e=parseFloat(s.style.width||"0"),t=parseFloat(s.style.height||"0");(!e||!t)&&(l||c)&&(!e&&l&&(s.style.width=`${Math.round(l)}px`),!t&&c&&(s.style.height=`${Math.round(c)}px`))}try{const e=(n?.tagName||"").toLowerCase(),t=a=>n?.getAttribute?.(a)||void 0;let r={...{fill:t("fill"),stroke:t("stroke"),"stroke-width":t("stroke-width"),opacity:t("opacity")}};e==="rect"?r={...r,x:t("x"),y:t("y"),width:t("width"),height:t("height")}:e==="circle"&&(r={...r,cx:t("cx"),cy:t("cy"),r:t("r")})}catch{}}var N={showSvgNodeOverlay:S};const L=Object.freeze(Object.defineProperty({__proto__:null,handlers:N,showSvgNodeOverlay:S},Symbol.toStringTag,{value:"Module"})),T=Object.freeze(Object.defineProperty({__proto__:null,handlers:N},Symbol.toStringTag,{value:"Module"}));export{L as a,T as b,S as s};
