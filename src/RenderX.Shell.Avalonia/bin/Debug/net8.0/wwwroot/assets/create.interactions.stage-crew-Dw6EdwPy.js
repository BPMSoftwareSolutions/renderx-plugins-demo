import{h as f,s as g}from"./select.symphony-Bb_FpRjQ.js";import{E as v}from"./EventRouter-DUQzZvsb.js";import"./select.overlay.line-advanced.stage-crew-CF7iQdNt.js";import"./select.overlay.dom.stage-crew-T3p4uTrs.js";import"./select.overlay.css.stage-crew-CJxa9lQN.js";import"./line.recompute.stage-crew-Cdi50jWQ.js";import"./interactionManifest-BORsh5a3.js";import"./select.overlay.resize.stage-crew-i_8OfntN.js";import"./Header-A6BR6KQZ-DYj0DEFE.js";import"./feature-flags-IuyZAa4_.js";function Y(o,c,e){try{o.addEventListener?.("click",t=>{try{t.stopPropagation?.()}catch{}e?.({id:c})})}catch{}}function M(o,c,e,t){try{let n=!1,r={x:0,y:0},a={x:0,y:0};o.addEventListener?.("mousedown",i=>{if(i.button!==0)return;try{i.stopPropagation?.()}catch{}n=!0,r={x:i.clientX,y:i.clientY};const p=o.getBoundingClientRect(),u=(o.parentElement||c).getBoundingClientRect();a={x:p.left-u.left,y:p.top-u.top},i.preventDefault();try{f()}catch{}const h=s=>{if(!n)return;const l=s.clientX-r.x,d=s.clientY-r.y,m={x:a.x+l,y:a.y+d};t.onDragMove?.({id:e,position:m,delta:{x:l,y:d}})},y=s=>{if(!n)return;n=!1;const l=s.clientX-r.x,d=s.clientY-r.y,m={x:a.x+l,y:a.y+d};t.onDragEnd?.({id:e,finalPosition:m,totalDelta:{x:l,y:d}}),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",y);try{g({id:e})}catch{}};document.addEventListener("mousemove",h),document.addEventListener("mouseup",y),t.onDragStart?.({id:e,startPosition:a,mousePosition:r})})}catch{}}function x(o,c){const e=[];let t=c;for(;t&&t!==o;){const n=t.parentElement;if(!n)break;const a=Array.from(n.children).indexOf(t);a>=0&&e.unshift(a),t=n}return e.join("/")}function O(o,c,e){try{o.addEventListener("click",t=>{try{const n=t.target;if(n===o)return;const r=x(o,n);r&&(t.stopPropagation(),v.publish("canvas.component.select.svg-node.requested",{id:c,path:r},e||window.RenderX?.conductor))}catch(n){try{e?.logger?.warn?.("SVG node click handling error:",n)}catch{}}})}catch(t){try{e?.logger?.warn?.("SVG node click attachment error:",t)}catch{}}}export{M as attachDrag,Y as attachSelection,O as attachSvgNodeClick};
