import{E as r}from"./EventRouter-DUQzZvsb.js";async function s(l,e){try{if(typeof document>"u"){e.logger?.warn?.("openUiFile: not in a browser environment");return}const n=document.createElement("input");n.type="file",n.accept=".ui,application/json";const o=await new Promise(i=>{n.onchange=()=>i(n.files?.[0]||null),n.click()});if(!o)return;const a=await o.text();try{const i=JSON.parse(a);e.payload.uiFileContent=i,e.logger?.info?.("Loaded .ui file",{name:o.name,size:o.size});try{const t=`${Date.now()}-${Math.random().toString(36).slice(2)}`;e.payload.importCorrelationId=t,r.publish("canvas.component.import.started",{correlationId:t,fileName:o.name,size:o.size},e.conductor)}catch{}}catch(i){e.logger?.error?.("Invalid .ui JSON:",i),e.payload.error="Invalid .ui JSON"}}catch(n){e.logger?.error?.("openUiFile failed:",n)}}export{s as openUiFile};
