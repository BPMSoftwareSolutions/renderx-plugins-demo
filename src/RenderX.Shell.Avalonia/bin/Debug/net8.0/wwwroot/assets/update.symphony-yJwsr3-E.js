import{updateFromElement as p}from"./update.stage-crew-GOMhP5FJ.js";import{i as h}from"./feature-flags-IuyZAa4_.js";import"./chunk-IJMTATCY-CvSs8J70.js";var u={},c=0,f=150,g=1,M={updateFromElement:p,notifyUi(b,o){const r=o.payload?.selectionModel,i=o.payload?._source;if(!r)return;const n=r?.header?.id,t=r?.layout;if(n&&t&&(i==="drag"||i==="resize")){const e=u[n];let a=g;try{if(h("perf.cp.layout-eps")){const l=globalThis.__cpPerf||{};l.layoutEps&&Number.isFinite(Number(l.layoutEps))&&(a=Number(l.layoutEps))}}catch{}if(!(!e||Math.abs(t.x-e.x)>a||Math.abs(t.y-e.y)>a||Math.abs(t.width-e.width)>a||Math.abs(t.height-e.height)>a))return;u[n]={...t}}let s=f;try{const e=globalThis.__cpPerf||{};e.dedupeWindow&&Number.isFinite(Number(e.dedupeWindow))&&(s=Number(e.dedupeWindow))}catch{}const d=Date.now();if(!(d-c<s)){c=d;try{const e=globalThis.RenderX?.EventRouter;e?(e.publish("control.panel.selection.updated",r),o.logger?.info?.("[SYMPHONY] Published control.panel.selection.updated event")):o.logger?.warn?.("[SYMPHONY] EventRouter not available on globalThis.RenderX")}catch(e){o.logger?.warn?.("Control Panel EventRouter publish error:",e)}}}};export{M as handlers};
