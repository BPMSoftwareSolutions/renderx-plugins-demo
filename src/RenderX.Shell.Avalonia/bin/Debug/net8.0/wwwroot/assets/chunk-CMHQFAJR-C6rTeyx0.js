var v=new Set(["a","b","strong","i","em","u","s","p","br","span","ul","ol","li","h1","h2","h3","h4","h5","h6","blockquote","code","pre","img","svg","path","rect","circle","g","div","form","button","input","label","table","thead","tbody","tr","th","td","text","line","polyline","polygon","ellipse","defs","lineargradient","stop","animate","animatetransform"]),y=new Set(["href","src"]),A=["http:","https:","mailto:","data:"];function w(e){return/^data:image\/(png|jpe?g|gif|webp|svg\+xml);base64,[a-z0-9+/=\s]+$/i.test(e.trim())}function b(e){if(!e||typeof e!="string")return"";const a=new DOMParser().parseFromString(`<div>${e}</div>`,"text/html"),i=a.body.firstElementChild;if(!i)return"";const s=a.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,null),r=[];for(;s.nextNode();){const t=s.currentNode,o=t.tagName.toLowerCase();if(!v.has(o)){if(o==="script"||o==="style"){r.push(t);continue}for(;t.firstChild;)t.parentNode?.insertBefore(t.firstChild,t);r.push(t);continue}for(const l of Array.from(t.attributes)){const c=l.name.toLowerCase(),g=l.value;if(c.startsWith("on")){t.removeAttribute(l.name);continue}if(c==="style"){/expression\s*\(/i.test(g)&&t.removeAttribute(l.name);continue}if(y.has(c))try{const f=a.createElement("a");f.href=g;const p=f.protocol;if(!A.includes(p)){t.removeAttribute(l.name);continue}if(p==="data:"&&!w(g)){t.removeAttribute(l.name);continue}}catch{t.removeAttribute(l.name)}}}for(const t of r)t.remove();return i.innerHTML}var m=null;function k(){try{const n=(globalThis||{})?.RenderX?.componentRules;n&&typeof n=="object"&&(m=n)}catch{}}function C(){return m||k(),m||{}}var S={default:[{whenAttr:"content",action:"textContent"},{whenAttr:"bg-color",action:"style",prop:"backgroundColor"},{whenAttr:"text-color",action:"style",prop:"color"},{whenAttr:"border-radius",action:"style",prop:"borderRadius"},{whenAttr:"font-size",action:"style",prop:"fontSize"},{whenAttr:"width",action:"stylePx",prop:"width"},{whenAttr:"height",action:"stylePx",prop:"height"},{whenAttr:"x",action:"stylePx",prop:"left"},{whenAttr:"y",action:"stylePx",prop:"top"},{whenAttr:"disabled",action:"boolAttr",attr:"disabled"}],byType:{button:[{whenAttr:"variant",action:"toggleClassVariant",base:"rx-button",prefix:"rx-button--",values:["primary","secondary","danger"]},{whenAttr:"size",action:"toggleClassVariant",base:"rx-button",prefix:"rx-button--",values:["small","medium","large"]},{whenAttr:"disabled",action:"boolAttr",attr:"disabled"}],heading:[{whenAttr:"level",action:"toggleClassVariant",base:"rx-heading",prefix:"rx-heading--level-",values:["h1","h2","h3","h4","h5","h6"]},{whenAttr:"variant",action:"toggleClassVariant",base:"rx-heading",prefix:"rx-heading--",values:["default","center","right"]},{whenAttr:"color",action:"style",prop:"color"},{whenAttr:"fontSize",action:"style",prop:"fontSize"}],image:[{whenAttr:"src",action:"attr",attr:"src"},{whenAttr:"alt",action:"attr",attr:"alt"},{whenAttr:"variant",action:"toggleClassVariant",base:"rx-image",prefix:"rx-image--",values:["default","rounded","circle","bordered","shadow","zoom","lift"]},{whenAttr:"loading",action:"attr",attr:"loading"},{whenAttr:"objectFit",action:"style",prop:"objectFit"}],input:[{whenAttr:"placeholder",action:"prop",prop:"placeholder"},{whenAttr:"inputType",action:"prop",prop:"type"},{whenAttr:"variant",action:"toggleClassVariant",base:"rx-input",prefix:"rx-input--",values:["default","error","success"]},{whenAttr:"value",action:"prop",prop:"value"},{whenAttr:"disabled",action:"boolAttr",attr:"disabled"},{whenAttr:"required",action:"boolAttr",attr:"required"}],line:[{whenAttr:"stroke",action:"attr",attr:"stroke"},{whenAttr:"thickness",action:"attr",attr:"data-thickness"}],svg:[{whenAttr:"viewBox",action:"attr",attr:"viewBox"},{whenAttr:"preserveAspectRatio",action:"attr",attr:"preserveAspectRatio"},{whenAttr:"svgMarkup",action:"innerHtml"}],paragraph:[{whenAttr:"content",action:"textContent"},{whenAttr:"variant",action:"toggleClassVariant",base:"rx-paragraph",prefix:"rx-paragraph--",values:["default","center","right","justify","small","large","bold","light"]},{whenAttr:"color",action:"style",prop:"color"},{whenAttr:"fontSize",action:"stylePx",prop:"fontSize"},{whenAttr:"lineHeight",action:"style",prop:"lineHeight"}],html:[{whenAttr:"markup",action:"innerHtml"}]}},R={default:[{action:"textFrom",from:"text"}],byType:{button:[{action:"textFrom",from:"content"},{action:"attr",attr:"disabled",from:"disabled",boolAttr:!0}],input:[{action:"prop",prop:"placeholder",from:"placeholder"},{action:"prop",prop:"value",from:"value"},{action:"prop",prop:"type",from:"inputType"},{action:"prop",prop:"disabled",from:"disabled"},{action:"prop",prop:"required",from:"required"}],img:[{action:"attr",attr:"src",from:"src"},{action:"attr",attr:"alt",from:"alt"},{action:"attr",attr:"loading",from:"loading"},{action:"style",prop:"objectFit",from:"objectFit"}],image:[{action:"attr",attr:"src",from:"src"},{action:"attr",attr:"alt",from:"alt"},{action:"attr",attr:"loading",from:"loading"},{action:"style",prop:"objectFit",from:"objectFit"}],container:[{action:"textFrom",from:"text"}],div:[{action:"textFrom",from:"text"}],heading:[{action:"textFrom",from:"content",fallback:""}],line:[{action:"attr",attr:"stroke",from:"stroke"},{action:"attr",attr:"data-thickness",from:"thickness"}],svg:[{action:"attr",attr:"viewBox",from:"viewBox"},{action:"attr",attr:"preserveAspectRatio",from:"preserveAspectRatio"},{action:"innerHtml",from:"svgMarkup"}],paragraph:[{action:"textFrom",from:"content"},{action:"style",prop:"color",from:"color"},{action:"style",prop:"fontSize",from:"fontSize"},{action:"style",prop:"lineHeight",from:"lineHeight"}],html:[{action:"innerHtml",from:"markup"}]}},T={default:[{get:"textContent",as:"text"}],byType:{button:[{get:"textContent",as:"content"},{get:"classVariant",prefix:"rx-button--",values:["primary","secondary","danger"],as:"variant",fallback:"primary"},{get:"classVariant",prefix:"rx-button--",values:["small","medium","large"],as:"size",fallback:"medium"},{get:"hasAttr",attr:"disabled",as:"disabled"}],input:[{get:"prop",prop:"placeholder",as:"placeholder"},{get:"prop",prop:"value",as:"value"},{get:"prop",prop:"type",as:"inputType"},{get:"classVariant",prefix:"rx-input--",values:["default","error","success"],as:"variant",fallback:"default"},{get:"hasAttr",attr:"disabled",as:"disabled"},{get:"hasAttr",attr:"required",as:"required"}],img:[{get:"attr",attr:"src",as:"src"},{get:"attr",attr:"alt",as:"alt"},{get:"attr",attr:"loading",as:"loading"},{get:"style",prop:"objectFit",as:"objectFit"}],image:[{get:"attr",attr:"src",as:"src"},{get:"attr",attr:"alt",as:"alt"},{get:"attr",attr:"loading",as:"loading"},{get:"classVariant",prefix:"rx-image--",values:["default","rounded","circle","bordered","shadow","zoom","lift"],as:"variant",fallback:"default"},{get:"style",prop:"objectFit",as:"objectFit"}],container:[{get:"textContent",as:"text"}],div:[{get:"textContent",as:"text"}],heading:[{get:"textContent",as:"content"},{get:"classVariant",prefix:"rx-heading--level-",values:["h1","h2","h3","h4","h5","h6"],as:"level",fallback:"tagName"},{get:"classVariant",prefix:"rx-heading--",values:["default","center","right"],as:"variant",fallback:"default"},{get:"style",prop:"color",as:"color"},{get:"style",prop:"fontSize",as:"fontSize"}],line:[{get:"attr",attr:"stroke",as:"stroke"},{get:"attr",attr:"data-thickness",as:"thickness"}],svg:[{get:"attr",attr:"viewBox",as:"viewBox"},{get:"attr",attr:"preserveAspectRatio",as:"preserveAspectRatio"},{get:"innerHtml",as:"svgMarkup"}],paragraph:[{get:"textContent",as:"content"},{get:"classVariant",prefix:"rx-paragraph--",values:["default","center","right","justify","small","large","bold","light"],as:"variant",fallback:"default"},{get:"style",prop:"color",as:"color"},{get:"style",prop:"fontSize",as:"fontSize"},{get:"style",prop:"lineHeight",as:"lineHeight"}],html:[{get:"innerHtml",as:"markup"}]}};function d(e){const n=Array.from(e.classList).find(a=>a.startsWith("rx-")&&a!=="rx-comp");return n?n.replace("rx-",""):e.tagName.toLowerCase()}var L=class{constructor(e,n,a){const i=C();this.updateRules=e||i.update||S,this.contentRules=n||i.content||R,this.extractRules=a||i.extract||T}getUpdateRulesFor(e){const n=d(e),a=this.updateRules.byType?.[n]||[];return[...this.updateRules.default,...a]}applyUpdate(e,n,a){const s=this.getUpdateRulesFor(e).find(r=>r.whenAttr===n);if(!s)return!1;switch(s.action){case"textContent":return e.textContent=String(a),!0;case"style":return e.style[s.prop]=String(a),!0;case"stylePx":return e.style[s.prop]=`${Number(a)}px`,!0;case"boolAttr":{const r=s.attr;return a?e.setAttribute(r,"true"):e.removeAttribute(r),!0}case"attr":{const r=s.attr;return e.setAttribute(r,String(a)),!0}case"prop":{const r=s.prop;return e[r]=a,!0}case"innerHtml":{const r=String(a??""),t=d(e);return e.innerHTML=t==="html"?b(r):r,!0}case"toggleClassVariant":{const{base:r,prefix:t,values:o}=s,l=Array.from(e.classList),c=Array.isArray(o)&&o.length>0,g=c?o.flatMap(u=>{const h=`${t}${u}`;if(t.includes("--")){const x=`${t.replace("--","-")}${u}`;return[h,x]}return[h]}):[],f=c?[]:[t,...t.includes("--")?[t.replace("--","-")]:[]];for(const u of l)u!==r&&(c&&g.includes(u)||!c&&f.some(h=>u.startsWith(h)))&&e.classList.remove(u);const p=String(a);return p&&e.classList.add(`${t}${p}`),!0}}}applyContent(e,n,a){if(!a||typeof a!="object")return;const i=String(n||"").toLowerCase(),s=[...this.contentRules.default||[],...this.contentRules.byType?.[i]||[]];for(const r of s)switch(r.action){case"textFrom":{const t=a[r.from]??r.fallback;t!==void 0&&(e.textContent=String(t));break}case"attr":{const t=a[r.from];r.boolAttr?t?e.setAttribute(r.attr,""):e.removeAttribute(r.attr):t!==void 0&&e.setAttribute(r.attr,String(t));break}case"prop":{const t=a[r.from];t!==void 0&&(e[r.prop]=t);break}case"style":{const t=a[r.from];t!==void 0&&(e.style[r.prop]=String(t));break}case"innerHtml":{const t=a[r.from];if(t!==void 0){const o=String(t);e.innerHTML=i==="html"?b(o):o}break}}}extractContent(e,n){const a={},i=String(n||d(e)||"").toLowerCase(),s=[...this.extractRules.default||[],...this.extractRules.byType?.[i]||[]];for(const r of s)switch(r.get){case"textContent":{const t=e.textContent?.trim();t&&(a[r.as]=t);break}case"attr":{const t=e.getAttribute(r.attr);t!=null&&(a[r.as]=t);break}case"hasAttr":{a[r.as]=e.hasAttribute(r.attr)||!1;break}case"prop":{const t=r.prop;let o=e[t];o!=null&&o!==""&&(t==="tagName"&&(o=String(o).toLowerCase()),a[r.as]=o);break}case"style":{const t=e.style[r.prop];t&&(a[r.as]=t);break}case"innerHtml":{const t=e.innerHTML;t&&t.trim().length&&(a[r.as]=t);break}case"classVariant":{const t=r,o=t.prefix,l=t.values||[],c=t.fallback,f=Array.from(e.classList).find(p=>{if(!p.startsWith(o))return!1;const u=p.slice(o.length);return l.includes(u)});if(f){a[t.as]=f.slice(o.length);break}if(c==="tagName"){const p=e.tagName?.toLowerCase();p&&l.includes(p)&&(a[t.as]=p)}else c&&(a[t.as]=c);break}}return a}};export{L as C};
