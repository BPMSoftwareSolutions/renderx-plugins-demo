<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="using:RenderX.HostSDK.Avalonia.Services"
             x:Class="RenderX.Shell.Avalonia.UI.Views.ActivityLogPanel"
             Background="{DynamicResource Color.Background.Primary}">
    <DockPanel>
        <!-- Header -->
        <Border DockPanel.Dock="Top"
                Background="{DynamicResource Color.Background.Hover}"
                Padding="12"
                BorderBrush="{DynamicResource Color.Border.Primary}"
                BorderThickness="0,1,0,1">
            <Grid ColumnDefinitions="*,Auto,Auto,Auto">
                <!-- Title -->
                <TextBlock Grid.Column="0"
                           Text="ðŸ“‹ Activity Log"
                           FontSize="13"
                           FontWeight="Bold"
                           Foreground="{DynamicResource Color.Text.Primary}"
                           VerticalAlignment="Center" />
                
                <!-- Log Count -->
                <TextBlock Grid.Column="1"
                           Name="LogCountText"
                           Margin="12,0,0,0"
                           FontSize="11"
                           Foreground="{DynamicResource Color.Text.Tertiary}"
                           VerticalAlignment="Center" />
                
                <!-- Clear Button -->
                <Button Grid.Column="2"
                        Content="Clear"
                        Margin="12,0,0,0"
                        Padding="8,4"
                        FontSize="11"
                        Click="OnClearClicked" />
                
                <!-- Collapse Button -->
                <Button Grid.Column="3"
                        Content="âˆ’"
                        Margin="8,0,0,0"
                        Padding="6,2"
                        FontSize="12"
                        Click="OnCollapseClicked" />
            </Grid>
        </Border>

        <!-- Log List -->
        <ListBox DockPanel.Dock="Bottom"
                 Name="LogListBox"
                 Background="{DynamicResource Color.Background.Primary}"
                 Foreground="{DynamicResource Color.Text.Primary}"
                 ScrollViewer.VerticalScrollBarVisibility="Auto"
                 ScrollViewer.HorizontalScrollBarVisibility="Disabled">
            <ListBox.ItemTemplate>
                <DataTemplate DataType="local:LogEntry">
                    <Border Padding="8,4"
                            BorderBrush="{DynamicResource Color.Border.Primary}"
                            BorderThickness="0,0,0,1">
                        <StackPanel Spacing="2">
                            <!-- Header: Timestamp + Level + Source -->
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <TextBlock Text="{Binding Timestamp, StringFormat='HH:mm:ss.fff'}"
                                           FontSize="10"
                                           Foreground="{DynamicResource Color.Text.Tertiary}"
                                           FontFamily="Courier New" />
                                
                                <!-- Level Badge -->
                                <Border Padding="4,2"
                                        CornerRadius="2"
                                        Background="{Binding Level, Converter={StaticResource LogLevelColorConverter}}">
                                    <TextBlock Text="{Binding Level}"
                                               FontSize="9"
                                               FontWeight="Bold"
                                               Foreground="White" />
                                </Border>
                                
                                <TextBlock Text="{Binding Source}"
                                           FontSize="10"
                                           FontWeight="Medium"
                                           Foreground="{DynamicResource Color.Text.Secondary}" />
                            </StackPanel>
                            
                            <!-- Message -->
                            <TextBlock Text="{Binding Message}"
                                       FontSize="11"
                                       Foreground="{DynamicResource Color.Text.Primary}"
                                       TextWrapping="Wrap"
                                       Margin="0,2,0,0" />
                        </StackPanel>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </DockPanel>
</UserControl>

