import{g}from"./component-mapper-Dsg136Sp.js";var p=(y,e)=>{try{const n=e.payload.components||[],r=e.payload.layoutData||[],s=e.payload.canvasMetadata||{width:0,height:0},o=e.payload.cssClasses||{},i=new Map;for(const t of r)i.set(t.id,t);const l=n.map(t=>{const a=i.get(t.id)||{x:0,y:0,width:0,height:0,parentId:null,siblingIndex:0},d={id:t.id,type:t.type,template:{tag:g(t.type),classRefs:t.classes||[],style:t.style||{}},layout:{x:a.x,y:a.y,width:a.width,height:a.height},parentId:a.parentId??null,siblingIndex:a.siblingIndex??0,createdAt:t.createdAt};return t.content&&Object.keys(t.content).length>0&&(d.content=t.content),d}),h={version:"1.0.1",metadata:{createdAt:new Date().toISOString(),canvasSize:{width:s.width,height:s.height},componentCount:n.length},cssClasses:o,components:l};e.payload.uiFileContent=h,e.logger?.info?.(`Built UI file content with ${l.length} components and ${Object.keys(o).length} CSS classes`)}catch(n){e.logger?.error?.("Failed to build UI file content:",n),e.payload.error=String(n),e.payload.uiFileContent={version:"1.0.1",metadata:{createdAt:new Date().toISOString(),canvasSize:{width:0,height:0},componentCount:0},cssClasses:{},components:[]}}};export{p as buildUiFileContent};
