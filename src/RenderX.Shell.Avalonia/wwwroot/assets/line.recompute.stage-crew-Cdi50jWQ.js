var Q="http://www.w3.org/2000/svg";function J(e){let t=e.querySelector("line.segment");return t||(t=document.createElementNS(Q,"line"),t.setAttribute("class","segment"),t.setAttribute("vector-effect","non-scaling-stroke"),e.appendChild(t)),t}function K(e){let t=e.querySelector("path.segment-curve");return t||(t=document.createElementNS(Q,"path"),t.setAttribute("class","segment-curve"),t.setAttribute("vector-effect","non-scaling-stroke"),t.style.display="none",e.appendChild(t)),t}function y(e,t,r){const s=e.style.getPropertyValue(t);if(s){const n=parseFloat(s);if(Number.isFinite(n))return n}try{const f=getComputedStyle(e).getPropertyValue(t),d=parseFloat(f);if(Number.isFinite(d))return d}catch{}return r}function x(e,t){const r=(e.style.getPropertyValue(t)||"").trim().toLowerCase();if(r==="1"||r==="true"||r==="yes")return!0;if(r==="0"||r==="false"||r==="no")return!1;try{const n=(getComputedStyle(e).getPropertyValue(t)||"").trim().toLowerCase();if(n==="1"||n==="true"||n==="yes")return!0;if(n==="0"||n==="false"||n==="no")return!1}catch{}return!1}function T(e){const t=e.style.width||"",r=e.style.height||"",s=parseFloat(t)||e.getBoundingClientRect?.().width||0||100,n=parseFloat(r)||e.getBoundingClientRect?.().height||0||100;return{w:s,h:n}}function U(e){const t=e,r=J(e),s=K(e),{w:n,h:f}=T(e),d=y(t,"--x1",0),$=y(t,"--y1",0),C=y(t,"--x2",n),N=y(t,"--y2",$),W=y(t,"--cx",(d+C)/2),j=y(t,"--cy",($+N)/2),p=x(t,"--curve"),A=y(t,"--angle",0),S=o=>Number((o/n*100).toFixed(3).replace(/\.0+$/,"").replace(/\.$/,"")),g=o=>Number((o/f*100).toFixed(3).replace(/\.0+$/,"").replace(/\.$/,"")),c=S(d),a=g($),i=S(C),l=g(N),V=S(W),E=g(j),P=o=>{if(o)if(Math.abs(A)>1e-4){const u=(c+i)/2,m=(a+l)/2;o.setAttribute("transform",`rotate(${A} ${u} ${m})`)}else o.removeAttribute("transform")},B=y(t,"--thickness",2),L=B*4/n*100,X=B*4/f*100,v=A*Math.PI/180,Y=(c+i)/2,R=(a+l)/2,k=(o,u)=>{if(!v)return{x:o,y:u};const m=Math.cos(v),H=Math.sin(v),I=o-Y,O=u-R;return{x:Y+I*m-O*H,y:R+I*H+O*m}},h=k(c,a),b=k(i,l),w=k(V,E);let F=Math.min(c,i,h.x,b.x,p?w.x:c),M=Math.min(a,l,h.y,b.y,p?w.y:a),q=Math.max(c,i,h.x,b.x,p?w.x:i),z=Math.max(a,l,h.y,b.y,p?w.y:l);F-=L,M-=X,q+=L,z+=X;const D=Math.max(1,q-F),G=Math.max(1,z-M);if(e.setAttribute("viewBox",`${F.toFixed(3).replace(/\.0+$/,"").replace(/\.$/,"")} ${M.toFixed(3).replace(/\.0+$/,"").replace(/\.$/,"")} ${D.toFixed(3).replace(/\.0+$/,"").replace(/\.$/,"")} ${G.toFixed(3).replace(/\.0+$/,"").replace(/\.$/,"")}`),p){const o=`M ${c} ${a} Q ${V} ${E} ${i} ${l}`;s.setAttribute("d",o),s.style.display="",r.style.display="none";const u=x(t,"--arrowStart"),m=x(t,"--arrowEnd");u?s.setAttribute("marker-start","url(#rx-arrow-start)"):s.removeAttribute("marker-start"),m?s.setAttribute("marker-end","url(#rx-arrow-end)"):s.removeAttribute("marker-end"),P(s)}else{r.setAttribute("x1",String(c)),r.setAttribute("y1",String(a)),r.setAttribute("x2",String(i)),r.setAttribute("y2",String(l)),s.style.display="none",r.style.display="";const o=x(t,"--arrowStart"),u=x(t,"--arrowEnd");o?r.setAttribute("marker-start","url(#rx-arrow-start)"):r.removeAttribute("marker-start"),u?r.setAttribute("marker-end","url(#rx-arrow-end)"):r.removeAttribute("marker-end"),P(r)}}export{U as recomputeLineSvg};
