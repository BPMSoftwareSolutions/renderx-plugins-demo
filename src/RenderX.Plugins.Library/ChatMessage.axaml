<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="RenderX.Plugins.Library.ChatMessage"
             Background="Transparent">
    <Border Background="Transparent" Margin="0,8">
        <StackPanel Spacing="8">
            <!-- Author with icon and timestamp -->
            <Grid ColumnDefinitions="*,Auto">
                <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="6">
                    <TextBlock Text="ðŸ’¬"
                               FontSize="12"
                               VerticalAlignment="Center" />
                    <TextBlock x:Name="AuthorText"
                               Text="User"
                               FontSize="11"
                               FontWeight="Bold"
                               Foreground="{DynamicResource Color.Border.Primary}"
                               VerticalAlignment="Center" />
                </StackPanel>
                <TextBlock Grid.Column="1"
                           x:Name="TimestampText"
                           Text="12:34 PM"
                           FontSize="9"
                           Foreground="{DynamicResource Color.Text.Tertiary}"
                           VerticalAlignment="Center" />
            </Grid>
            
            <!-- Message Content -->
            <Border x:Name="MessageBorder"
                    Background="{DynamicResource Color.Background.Tertiary}"
                    BorderThickness="1"
                    BorderBrush="{DynamicResource Color.Border.Primary}"
                    CornerRadius="4"
                    Padding="8">
                <StackPanel Spacing="8">
                    <TextBlock x:Name="ContentText"
                               Text="Message content"
                               FontSize="11"
                               Foreground="#666"
                               TextWrapping="Wrap" />
                    
                    <!-- Component Preview (if AI generated component) -->
                    <Border x:Name="ComponentPreviewBorder"
                            IsVisible="False"
                            Background="{DynamicResource Color.Background.Primary}"
                            BorderBrush="{DynamicResource Color.Border.Secondary}"
                            BorderThickness="1"
                            CornerRadius="4"
                            Padding="12">
                        <StackPanel Spacing="12">
                            <!-- Component Header -->
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <TextBlock x:Name="ComponentIconText"
                                           Text="ðŸ§©"
                                           FontSize="24"
                                           VerticalAlignment="Top" />
                                <StackPanel Spacing="4">
                                    <!-- Component Name (h4 equivalent) -->
                                    <TextBlock x:Name="ComponentNameText"
                                               Text="Component Name"
                                               FontSize="14"
                                               FontWeight="Bold"
                                               Foreground="{DynamicResource Color.Text.Primary}" />
                                    <!-- Component Description (p equivalent) -->
                                    <TextBlock x:Name="ComponentDescriptionText"
                                               Text="Component description"
                                               FontSize="11"
                                               Foreground="{DynamicResource Color.Text.Secondary}"
                                               TextWrapping="Wrap" />
                                    <!-- Component Tags -->
                                    <StackPanel x:Name="ComponentTagsPanel"
                                               Orientation="Horizontal"
                                               Spacing="4"
                                               Margin="0,4,0,0" />
                                </StackPanel>
                            </StackPanel>
                            
                            <!-- Action Buttons -->
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <Button x:Name="AddToLibraryButton"
                                        Content="âž• Add to Component Library"
                                        Classes="action-button primary"
                                        FontSize="11"
                                        Padding="8,4"
                                        ToolTip.Tip="Add to Component Library" />
                                <Button x:Name="ViewJSONButton"
                                        Content="ðŸ“„ View/Hide JSON"
                                        Classes="action-button secondary"
                                        FontSize="11"
                                        Padding="8,4"
                                        Click="OnViewJSONClick"
                                        ToolTip.Tip="View/Hide JSON" />
                                <Button x:Name="CopyJSONButton"
                                        Content="ðŸ“‹ Copy JSON"
                                        Classes="action-button secondary"
                                        FontSize="11"
                                        Padding="8,4"
                                        ToolTip.Tip="Copy JSON to clipboard" />
                                <Button x:Name="EditButton"
                                        Content="âœï¸ Edit component"
                                        Classes="action-button secondary"
                                        FontSize="11"
                                        Padding="8,4"
                                        ToolTip.Tip="Edit component" />
                                <Button x:Name="RegenerateButton"
                                        Content="ðŸ”„ Generate a new version"
                                        Classes="action-button secondary"
                                        FontSize="11"
                                        Padding="8,4"
                                        ToolTip.Tip="Generate a new version" />
                            </StackPanel>
                            
                            <!-- JSON Display (initially hidden) -->
                            <Border x:Name="JSONDisplayBorder"
                                    IsVisible="False"
                                    Background="{DynamicResource Color.Background.Secondary}"
                                    BorderBrush="{DynamicResource Color.Border.Secondary}"
                                    BorderThickness="1"
                                    CornerRadius="4"
                                    Padding="12">
                                <StackPanel Spacing="8">
                                    <!-- JSON Header -->
                                    <Grid ColumnDefinitions="*,Auto,Auto">
                                        <TextBlock Grid.Column="0"
                                                   Text="Component JSON"
                                                   FontSize="12"
                                                   FontWeight="Bold"
                                                   Foreground="{DynamicResource Color.Text.Primary}"
                                                   VerticalAlignment="Center" />
                                        <Button Grid.Column="1"
                                                x:Name="CopyJSONButton"
                                                Content="ðŸ“‹ Copy"
                                                FontSize="10"
                                                Padding="6,4"
                                                Margin="4,0"
                                                Background="{DynamicResource Color.Border.Primary}"
                                                Foreground="{DynamicResource Color.Background.Primary}"
                                                BorderThickness="0"
                                                Click="OnCopyJSONClick" />
                                        <Button Grid.Column="2"
                                                x:Name="CloseJSONButton"
                                                Content="âœ•"
                                                FontSize="14"
                                                Padding="4"
                                                Background="Transparent"
                                                BorderThickness="0"
                                                Click="OnCloseJSONClick" />
                                    </Grid>
                                    <!-- JSON Content (with monospace font - pre/code equivalent) -->
                                    <Border Background="#1f2937"
                                            CornerRadius="4"
                                            Padding="12">
                                        <TextBlock x:Name="JSONContentText"
                                                   Text="{}"
                                                   FontFamily="Consolas,Courier New,monospace"
                                                   FontSize="10"
                                                   Foreground="#e5e7eb"
                                                   TextWrapping="Wrap"
                                                   LineHeight="1.4" />
                                    </Border>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Border>
        </StackPanel>
    </Border>
</UserControl>

