<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="RenderX.Plugins.Library.ChatMessage"
             Background="Transparent">
    <Border Background="Transparent" Margin="0,8">
        <StackPanel Spacing="8">
            <!-- Author with icon -->
            <StackPanel Orientation="Horizontal" Spacing="6">
                <TextBlock Text="ðŸ’¬"
                           FontSize="12"
                           VerticalAlignment="Center" />
                <TextBlock x:Name="AuthorText"
                           Text="User"
                           FontSize="11"
                           FontWeight="Bold"
                           Foreground="{DynamicResource Color.Border.Primary}"
                           VerticalAlignment="Center" />
            </StackPanel>
            
            <!-- Message Content -->
            <Border x:Name="MessageBorder"
                    Background="{DynamicResource Color.Background.Tertiary}"
                    BorderThickness="1"
                    BorderBrush="{DynamicResource Color.Border.Primary}"
                    CornerRadius="4"
                    Padding="8">
                <StackPanel Spacing="8">
                    <TextBlock x:Name="ContentText"
                               Text="Message content"
                               FontSize="11"
                               Foreground="#666"
                               TextWrapping="Wrap" />
                    
                    <!-- Component Preview (if AI generated component) -->
                    <Border x:Name="ComponentPreviewBorder"
                            IsVisible="False"
                            Background="{DynamicResource Color.Background.Primary}"
                            BorderBrush="{DynamicResource Color.Border.Secondary}"
                            BorderThickness="1"
                            CornerRadius="4"
                            Padding="12">
                        <StackPanel Spacing="12">
                            <!-- Component Header -->
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <TextBlock x:Name="ComponentIconText"
                                           Text="ðŸ§©"
                                           FontSize="24"
                                           VerticalAlignment="Top" />
                                <StackPanel Spacing="4">
                                    <TextBlock x:Name="ComponentNameText"
                                               Text="Component Name"
                                               FontSize="14"
                                               FontWeight="Bold"
                                               Foreground="{DynamicResource Color.Text.Primary}" />
                                    <TextBlock x:Name="ComponentDescriptionText"
                                               Text="Component description"
                                               FontSize="11"
                                               Foreground="{DynamicResource Color.Text.Secondary}"
                                               TextWrapping="Wrap" />
                                </StackPanel>
                            </StackPanel>
                            
                            <!-- Action Buttons -->
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <Button x:Name="AddToLibraryButton"
                                        Content="âž• Add to Library"
                                        Classes="action-button primary"
                                        FontSize="11"
                                        Padding="8,4" />
                                <Button x:Name="ViewJSONButton"
                                        Content="ðŸ“„ View JSON"
                                        Classes="action-button secondary"
                                        FontSize="11"
                                        Padding="8,4" />
                                <Button x:Name="CopyJSONButton"
                                        Content="ðŸ“‹ Copy JSON"
                                        Classes="action-button secondary"
                                        FontSize="11"
                                        Padding="8,4" />
                                <Button x:Name="EditButton"
                                        Content="âœï¸ Edit"
                                        Classes="action-button secondary"
                                        FontSize="11"
                                        Padding="8,4" />
                                <Button x:Name="RegenerateButton"
                                        Content="ðŸ”„ Try Again"
                                        Classes="action-button secondary"
                                        FontSize="11"
                                        Padding="8,4" />
                            </StackPanel>
                            
                            <!-- JSON Display (initially hidden) -->
                            <Border x:Name="JSONDisplayBorder"
                                    IsVisible="False"
                                    Background="{DynamicResource Color.Background.Secondary}"
                                    BorderBrush="{DynamicResource Color.Border.Secondary}"
                                    BorderThickness="1"
                                    CornerRadius="4"
                                    Padding="12">
                                <StackPanel Spacing="8">
                                    <!-- JSON Header -->
                                    <Grid>
                                        <TextBlock Text="Component JSON"
                                                   FontSize="12"
                                                   FontWeight="Bold"
                                                   Foreground="{DynamicResource Color.Text.Primary}"
                                                   HorizontalAlignment="Left" />
                                        <Button x:Name="CloseJSONButton"
                                                Content="âœ•"
                                                FontSize="14"
                                                Padding="4"
                                                HorizontalAlignment="Right"
                                                Background="Transparent"
                                                BorderThickness="0" />
                                    </Grid>
                                    <!-- JSON Content (with monospace font) -->
                                    <TextBox x:Name="JSONContentText"
                                             Text="{}"
                                             FontFamily="Consolas,Courier New,monospace"
                                             FontSize="10"
                                             IsReadOnly="True"
                                             TextWrapping="Wrap"
                                             AcceptsReturn="True"
                                             Background="{DynamicResource Color.Background.Primary}"
                                             BorderThickness="0"
                                             MinHeight="150"
                                             MaxHeight="400" />
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Border>
        </StackPanel>
    </Border>
</UserControl>

