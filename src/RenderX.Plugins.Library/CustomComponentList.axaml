<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="RenderX.Plugins.Library.CustomComponentList"
             Background="{DynamicResource Color.Background.Primary}">
    <UserControl.Styles>
        <Style Selector="Border.component-item">
            <Setter Property="Transitions">
                <Transitions>
                    <BrushTransition Property="Background" Duration="0:0:0.2"/>
                    <BrushTransition Property="BorderBrush" Duration="0:0:0.2"/>
                </Transitions>
            </Setter>
        </Style>
        <Style Selector="Border.component-item:pointerover">
            <Setter Property="Background" Value="{DynamicResource Color.Background.Hover}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource Color.Accent.Primary}"/>
        </Style>
        <Style Selector="Button.remove-button">
            <Setter Property="Transitions">
                <Transitions>
                    <BrushTransition Property="Background" Duration="0:0:0.2"/>
                </Transitions>
            </Setter>
        </Style>
        <Style Selector="Button.remove-button:pointerover">
            <Setter Property="Background" Value="#ff6b6b"/>
        </Style>
    </UserControl.Styles>
    
    <DockPanel>
        <!-- Header -->
        <Border DockPanel.Dock="Top"
                Background="{DynamicResource Color.Background.Hover}"
                BorderThickness="0,0,0,1"
                BorderBrush="{DynamicResource Color.Border.Secondary}"
                Padding="12,8">
            <StackPanel Spacing="8">
                <TextBlock Text="Custom Components"
                           FontSize="14"
                           FontWeight="Bold"
                           Foreground="{DynamicResource Color.Text.Primary}" />
                <TextBlock x:Name="StorageInfo"
                           FontSize="10"
                           Foreground="{DynamicResource Color.Text.Secondary}"
                           Text="Storage: 0 MB / 100 MB" />
            </StackPanel>
        </Border>

        <!-- Storage Warning -->
        <Border x:Name="StorageWarning"
                DockPanel.Dock="Top"
                Background="rgba(255, 149, 0, 0.1)"
                BorderThickness="0,0,0,1"
                BorderBrush="rgba(255, 149, 0, 0.3)"
                Padding="12,8"
                IsVisible="False">
            <TextBlock Text="âš ï¸ Storage usage is above 80%. Consider removing unused components."
                       FontSize="11"
                       Foreground="#ff9500"
                       TextWrapping="Wrap" />
        </Border>

        <!-- Empty State -->
        <Border x:Name="EmptyState"
                Background="Transparent"
                Padding="24">
            <StackPanel Spacing="12" VerticalAlignment="Center" HorizontalAlignment="Center">
                <TextBlock Text="ðŸ“¦"
                           FontSize="48"
                           HorizontalAlignment="Center" />
                <TextBlock Text="No custom components yet"
                           FontSize="14"
                           FontWeight="Bold"
                           Foreground="{DynamicResource Color.Text.Primary}"
                           HorizontalAlignment="Center" />
                <TextBlock Text="Upload custom components to see them here"
                           FontSize="11"
                           Foreground="{DynamicResource Color.Text.Secondary}"
                           HorizontalAlignment="Center"
                           TextWrapping="Wrap" />
            </StackPanel>
        </Border>

        <!-- Components List -->
        <ScrollViewer DockPanel.Dock="Top">
            <ItemsControl x:Name="ComponentsItemsControl" Padding="8">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Classes="component-item"
                                Background="{DynamicResource Color.Background.Primary}"
                                BorderBrush="{DynamicResource Color.Border.Secondary}"
                                BorderThickness="1"
                                CornerRadius="8"
                                Padding="12"
                                Margin="0,4">
                            <Grid ColumnDefinitions="*,Auto">
                                <!-- Component Info -->
                                <StackPanel Grid.Column="0" Spacing="4">
                                    <TextBlock Text="{Binding Name}"
                                               FontWeight="Bold"
                                               Foreground="{DynamicResource Color.Text.Primary}" />
                                    <TextBlock Text="{Binding Description}"
                                               FontSize="10"
                                               Foreground="{DynamicResource Color.Text.Secondary}"
                                               TextWrapping="Wrap" />
                                    <StackPanel Orientation="Horizontal" Spacing="12">
                                        <TextBlock FontSize="9"
                                                   Foreground="{DynamicResource Color.Text.Tertiary}">
                                            <Run Text="ðŸ“… " />
                                            <Run Text="{Binding UploadDate}" />
                                        </TextBlock>
                                        <TextBlock FontSize="9"
                                                   Foreground="{DynamicResource Color.Text.Tertiary}">
                                            <Run Text="ðŸ’¾ " />
                                            <Run Text="{Binding FileSize}" />
                                        </TextBlock>
                                    </StackPanel>
                                </StackPanel>

                                <!-- Remove Button -->
                                <Button Grid.Column="1"
                                        Classes="remove-button"
                                        Content="Remove"
                                        Padding="8,4"
                                        Background="#ff6b6b"
                                        Foreground="White"
                                        FontSize="10"
                                        Click="OnRemoveClick"
                                        Tag="{Binding Id}" />
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </DockPanel>
</UserControl>

