{
  "id": "architecture-governance-enforcement-symphony",
  "sequenceId": "architecture-governance-enforcement-symphony",
  "name": "Architecture Governance Enforcement Symphony",
  "packageName": "orchestration",
  "title": "Symphonia Architecture Governance Enforcement",
  "description": "Multi-movement orchestration that enforces JSON as single source of truth through systematic validation, implementation verification, and auditability across the entire Symphonia system.",
  "purpose": "Ensure that JSON definitions drive all changes: code must conform, tests must validate, and markdown must be derived. Every change flows through explicit governance beats with full traceability.",
  "trigger": "On every commit via pre-commit hook; on every PR via CI/CD; on-demand via `npm run governance:enforce`",
  "kind": "orchestration",
  "version": "1.0.0",
  "status": "active",
  "governance": {
    "policies": [
      "JSON is always the source of truth",
      "Code changes must be preceded by JSON changes",
      "Tests must verify JSON ‚Üí Code mapping",
      "Markdown must be consistent with JSON",
      "All handlers must be referenced by beats",
      "All beats must have corresponding tests",
      "No orphaned code (handlers without beats)",
      "All conflicts resolved in favor of JSON"
    ],
    "metrics": [
      "JSON schema validation pass/fail",
      "Handler coverage (beats with handlers / total beats)",
      "Test coverage (beats with tests / total beats)",
      "Markdown consistency score",
      "Handler orphan detection",
      "Conformity score (JSON ‚Üí Code ‚Üí Tests ‚Üí Markdown)",
      "Governance rule violations count",
      "Auditability chain completeness"
    ]
  },
  "events": [
    "governance:initiated",
    "movement-1:json-validation:started",
    "movement-1:json-validation:complete",
    "movement-2:handler-mapping:started",
    "movement-2:handler-mapping:complete",
    "movement-3:test-coverage:started",
    "movement-3:test-coverage:complete",
    "movement-4:markdown-consistency:started",
    "movement-4:markdown-consistency:complete",
    "movement-5:auditability:started",
    "movement-5:auditability:complete",
    "movement-6:conformity:started",
    "movement-6:conformity:complete",
    "governance:success",
    "governance:failure",
    "governance:complete",
    "governance:report:generated"
  ],
  "movements": [
    {
      "name": "JSON Schema Validation",
      "emoji": "üìã",
      "description": "Validate all JSON files against schema; ensure structure is correct and complete",
      "purpose": "Establish JSON as authoritative by verifying it conforms to schema",
      "beats": [
        {
          "number": 1,
          "event": "movement-1:json-validation:started",
          "handler": "validateJSONSchemaStructure",
          "kind": "validation",
          "timing": "immediate",
          "description": "Load all symphony JSON files and validate against schema",
          "reference": "orchestration-domains.json, all json-sequences/*.json",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.validatejsonschemastructure.0",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 2,
          "event": "movement-1:orchestration-domains:validated",
          "handler": "validateOrchestrationDomainsRegistry",
          "kind": "validation",
          "timing": "immediate",
          "description": "Validate orchestration-domains.json has all required fields and correct structure",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.validateorchestrationdomainsregistry.1",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 3,
          "event": "movement-1:symphony-files:validated",
          "handler": "validateSymphonyFiles",
          "kind": "validation",
          "timing": "immediate",
          "description": "Validate each symphony JSON file (build-pipeline, conformity, etc.)",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.validatesymphonyfiles.2",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 4,
          "event": "movement-1:schema-section:validated",
          "handler": "validateSchemaSection",
          "kind": "validation",
          "timing": "immediate",
          "description": "Validate schema section exists and defines movement/beat/event requirements",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.validateschemasection.3",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 5,
          "event": "movement-1:json-validation:complete",
          "handler": "reportJSONValidation",
          "kind": "reporting",
          "timing": "immediate",
          "description": "Report validation results; fail if schema invalid",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.reportjsonvalidation.4",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        }
      ]
    },
    {
      "name": "Handler-to-Beat Mapping Verification",
      "emoji": "üîó",
      "description": "Verify every beat references a handler that exists in code; verify no orphaned handlers",
      "purpose": "Ensure code implementations match JSON specifications exactly",
      "beats": [
        {
          "number": 1,
          "event": "movement-2:handler-mapping:started",
          "handler": "startHandlerMappingVerification",
          "kind": "validation",
          "timing": "immediate",
          "description": "Begin handler-to-beat mapping verification process",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.starthandlermappingverification.0",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 2,
          "event": "movement-2:handlers:loaded",
          "handler": "loadHandlerImplementations",
          "kind": "data-gathering",
          "timing": "immediate",
          "description": "Load all handler implementations from scripts/build-symphony-handlers.js",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.loadhandlerimplementations.1",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 3,
          "event": "movement-2:beats-indexed",
          "handler": "indexBeatsFromJSON",
          "kind": "data-gathering",
          "timing": "immediate",
          "description": "Index all beats and their handler references from symphony JSON files",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.indexbeatsfromjson.2",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 4,
          "event": "movement-2:mapping-verified",
          "handler": "verifyBeatHandlerMapping",
          "kind": "validation",
          "timing": "immediate",
          "description": "Verify every beat has corresponding handler; collect mapping violations",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.verifybeathandlermapping.3",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 5,
          "event": "movement-2:orphans-detected",
          "handler": "detectOrphanHandlers",
          "kind": "validation",
          "timing": "immediate",
          "description": "Find handlers in code that are not referenced by any beat",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.detectorphanhandlers.4",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 6,
          "event": "movement-2:handler-mapping:complete",
          "handler": "reportHandlerMapping",
          "kind": "reporting",
          "timing": "immediate",
          "description": "Report handler mapping status; fail if violations found",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.reporthandlermapping.5",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        }
      ]
    },
    {
      "name": "Test Coverage Verification",
      "emoji": "‚úÖ",
      "description": "Verify every beat in JSON has corresponding test; verify tests reference JSON",
      "purpose": "Ensure tests are executable specifications derived from JSON",
      "beats": [
        {
          "number": 1,
          "event": "movement-3:test-coverage:started",
          "handler": "startTestCoverageVerification",
          "kind": "validation",
          "timing": "immediate",
          "description": "Begin test coverage verification process",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.starttestcoverageverification.0",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 2,
          "event": "movement-3:beats-catalogued",
          "handler": "catalogBeatsFromJSON",
          "kind": "data-gathering",
          "timing": "immediate",
          "description": "Create exhaustive catalog of all beats and events in symphony JSON",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.catalogbeatsfromjson.1",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 3,
          "event": "movement-3:tests-indexed",
          "handler": "indexTestFiles",
          "kind": "data-gathering",
          "timing": "immediate",
          "description": "Index all test files and their test descriptions (from .spec.ts)",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.indextestfiles.2",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 4,
          "event": "movement-3:coverage-analyzed",
          "handler": "analyzeTestCoverage",
          "kind": "validation",
          "timing": "immediate",
          "description": "Analyze coverage: which beats have tests, which don't",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.analyzetestcoverage.3",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 5,
          "event": "movement-3:uncovered-beats-identified",
          "handler": "identifyUncoveredBeats",
          "kind": "validation",
          "timing": "immediate",
          "description": "Identify beats lacking test coverage; collect list",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.identifyuncoveredbeats.4",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 6,
          "event": "movement-3:test-coverage:complete",
          "handler": "reportTestCoverage",
          "kind": "reporting",
          "timing": "immediate",
          "description": "Report test coverage percentage and violations",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.reporttestcoverage.5",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        }
      ]
    },
    {
      "name": "Markdown Consistency Verification",
      "emoji": "üìù",
      "description": "Verify markdown documentation is consistent with JSON definitions",
      "purpose": "Ensure markdown is derived from JSON, never contradicts JSON",
      "beats": [
        {
          "number": 1,
          "event": "movement-4:markdown-consistency:started",
          "handler": "startMarkdownConsistencyCheck",
          "kind": "validation",
          "timing": "immediate",
          "description": "Begin markdown consistency verification process",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.startmarkdownconsistencycheck.0",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 2,
          "event": "movement-4:facts-extracted",
          "handler": "extractFactsFromJSON",
          "kind": "data-gathering",
          "timing": "immediate",
          "description": "Extract key facts from JSON: movement count, beat count, event count, handler names",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.extractfactsfromjson.1",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 3,
          "event": "movement-4:markdown-files:identified",
          "handler": "identifyMarkdownFiles",
          "kind": "data-gathering",
          "timing": "immediate",
          "description": "Find all markdown files that reference symphonia",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.identifymarkdownfiles.2",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 4,
          "event": "movement-4:facts-verified",
          "handler": "verifyFactsInMarkdown",
          "kind": "validation",
          "timing": "immediate",
          "description": "Check if JSON facts are mentioned in markdown correctly",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.verifyfactsinmarkdown.3",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 5,
          "event": "movement-4:contradictions-detected",
          "handler": "detectMarkdownContradictions",
          "kind": "validation",
          "timing": "immediate",
          "description": "Find statements in markdown that contradict JSON",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.detectmarkdowncontradictions.4",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 6,
          "event": "movement-4:markdown-consistency:complete",
          "handler": "reportMarkdownConsistency",
          "kind": "reporting",
          "timing": "immediate",
          "description": "Report markdown consistency score and contradictions",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.reportmarkdownconsistency.5",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        }
      ]
    },
    {
      "name": "Auditability Chain Verification",
      "emoji": "üîç",
      "description": "Verify complete traceability: JSON ‚Üí Code ‚Üí Tests ‚Üí Markdown",
      "purpose": "Ensure every change is traceable and auditable through all tiers",
      "beats": [
        {
          "number": 1,
          "event": "movement-5:auditability:started",
          "handler": "startAuditabilityVerification",
          "kind": "validation",
          "timing": "immediate",
          "description": "Begin auditability chain verification process",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.startauditabilityverification.0",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 2,
          "event": "movement-5:json-definitions:loaded",
          "handler": "loadJSONDefinitions",
          "kind": "data-gathering",
          "timing": "immediate",
          "description": "Load all JSON definitions as the starting point",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.loadjsondefinitions.1",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 3,
          "event": "movement-5:code-mappings:created",
          "handler": "createCodeMappings",
          "kind": "data-gathering",
          "timing": "immediate",
          "description": "Create mapping: JSON beat ‚Üí Code handler",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.createcodemappings.2",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 4,
          "event": "movement-5:test-mappings:created",
          "handler": "createTestMappings",
          "kind": "data-gathering",
          "timing": "immediate",
          "description": "Create mapping: JSON beat ‚Üí Test coverage",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.createtestmappings.3",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 5,
          "event": "movement-5:markdown-mappings:created",
          "handler": "createMarkdownMappings",
          "kind": "data-gathering",
          "timing": "immediate",
          "description": "Create mapping: JSON fact ‚Üí Markdown mention",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.createmarkdownmappings.4",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 6,
          "event": "movement-5:chain-completeness:verified",
          "handler": "verifyChainCompleteness",
          "kind": "validation",
          "timing": "immediate",
          "description": "Verify complete traceability for all definitions",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.verifychaincompleteness.5",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 7,
          "event": "movement-5:auditability:complete",
          "handler": "reportAuditability",
          "kind": "reporting",
          "timing": "immediate",
          "description": "Report auditability score: % of JSON with complete chain",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.reportauditability.6",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        }
      ]
    },
    {
      "name": "Overall Governance Conformity",
      "emoji": "üëë",
      "description": "Synthesize all results; compute overall conformity score; generate governance report",
      "purpose": "Provide comprehensive governance status and determine if changes are allowed",
      "beats": [
        {
          "number": 1,
          "event": "movement-6:conformity:started",
          "handler": "startConformityAnalysis",
          "kind": "synthesis",
          "timing": "immediate",
          "description": "Begin overall conformity analysis",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.startconformityanalysis.0",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 2,
          "event": "movement-6:results:aggregated",
          "handler": "aggregateGovernanceResults",
          "kind": "synthesis",
          "timing": "immediate",
          "description": "Aggregate results from all 5 movements",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.aggregategovernanceresults.1",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 3,
          "event": "movement-6:conformity-score:calculated",
          "handler": "calculateConformityScore",
          "kind": "synthesis",
          "timing": "immediate",
          "description": "Calculate overall conformity score (0-100%)",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.calculateconformityscore.2",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 4,
          "event": "movement-6:violations:summarized",
          "handler": "summarizeViolations",
          "kind": "synthesis",
          "timing": "immediate",
          "description": "Summarize all governance violations found",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.summarizeviolations.3",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 5,
          "event": "movement-6:decision:made",
          "handler": "makeGovernanceDecision",
          "kind": "synthesis",
          "timing": "immediate",
          "description": "Decide: PASS (allow changes) or FAIL (reject changes)",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.makegovernancedecision.4",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 6,
          "event": "movement-6:report:generated",
          "handler": "generateGovernanceReport",
          "kind": "reporting",
          "timing": "immediate",
          "description": "Generate comprehensive governance report with recommendations",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.generategovernancereport.5",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        },
        {
          "number": 7,
          "event": "governance:complete",
          "handler": "concludeGovernanceEnforcement",
          "kind": "conclusion",
          "timing": "immediate",
          "description": "Conclude governance enforcement; exit with appropriate status code",
          "handlerDef": {
            "id": "architecture-governance-enforcement-symphony.concludegovernanceenforcement.6",
            "scope": "orchestration",
            "kind": "orchestration"
          }
        }
      ]
    }
  ]
}
