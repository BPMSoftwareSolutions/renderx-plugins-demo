{
  "pluginId": "ControlPanelPlugin",
  "id": "control-panel-classes-add-symphony",
  "name": "Control Panel Classes Add",
  "movements": [
    {
      "id": "addClass",
      "name": "Add Class",
      "beats": [
        {
          "beat": 1,
          "event": "control:panel:classes:add",
          "title": "Add CSS Class",
          "dynamics": "mf",
          "handler": "addClass",
          "timing": "immediate",
          "kind": "stage-crew",
          "number": 1,
          "scenario": "Add CSS Class to UI Element for State Representation",
          "testFile": "node_modules\\@renderx-plugins\\canvas-component\\__tests__\\import.base-classes.spec.ts",
          "testCase": "adds rx-comp and rx-<type> when missing from classRefs",
          "userStory": "As an engineer, I need `addClass` to apply semantic classes atomically, validate specificity, and record change events.",
          "acceptanceCriteriaStructured": [
            {
              "given": [
                "element and class name"
              ],
              "when": [
                "addClass runs"
              ],
              "then": [
                "class is added once, latency ≤ 5ms"
              ],
              "and": [
                "telemetry 'ui.class.add' includes elementId and class"
              ]
            }
          ]
        },
        {
          "beat": 2,
          "event": "control:panel:classes:notify",
          "title": "Notify UI",
          "dynamics": "mf",
          "handler": "notifyUi",
          "timing": "immediate",
          "kind": "pure",
          "number": 2,
          "scenario": "Publish UI State Change Notifications to Event System",
          "acceptanceCriteria": [
            "Given a class change operation completes\nWhen notifyUi is invoked with change details\nThen an event is published to the central EventRouter within 5ms\nAnd the event contains element ID, action (add/remove), and class name\nAnd the event is stamped with microsecond-precision timestamp",
            "Given multiple class operations occur in sequence\nWhen notifyUi publishes events\nThen events are queued in FIFO order\nAnd subscribers receive events in the order they occurred\nAnd no events are dropped or duplicated",
            "Given a subscriber is registered for UI change events\nWhen notifyUi publishes\nThen the subscriber receives the event within 20ms\nAnd the subscriber can act on the notification\nAnd multiple subscribers can consume the same event",
            "Given the event system is congested\nWhen notifyUi attempts to publish\nThen the event is queued with backpressure\nAnd the operation does not block the caller\nAnd events are eventually delivered with bounded latency",
            "Given notification occurs during error conditions\nWhen notifyUi is called\nThen events are still published for traceability\nAnd error context is included in event payload\nAnd the system can reconstruct the failure chain from events"
          ],
          "testFile": "node_modules\\@renderx-plugins\\canvas\\__tests__\\ui.export.spec.ts",
          "testCase": "exports CanvasPage and register()",
          "userStory": "As an orchestrator, I need `notifyUi` to publish class-add events with <20ms delivery and backpressure."
        }
      ],
      "userStory": "As a design systems engineer, I need class additions to be deterministic and auditable, updating UI within <20ms and persisting edits within ≤1s P95.",
      "persona": "Design systems engineer",
      "businessValue": "Enables responsive UI state transitions; maintains visual consistency; supports accessibility state management (aria-expanded, aria-selected)"
    }
  ],
  "beats": 2,
  "tempo": 120,
  "userStory": "As a design systems engineer, I need class additions to be deterministic and auditable, updating UI within <20ms and persisting edits within ≤1s P95.",
  "persona": "Design systems engineer",
  "businessValue": "Enables responsive UI state transitions; maintains visual consistency; supports accessibility state management (aria-expanded, aria-selected)"
}
