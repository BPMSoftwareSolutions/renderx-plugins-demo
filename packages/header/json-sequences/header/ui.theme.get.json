{
  "pluginId": "HeaderThemePlugin",
  "id": "header-ui-theme-get-symphony",
  "name": "Header UI Theme Get",
  "movements": [
    {
      "id": "get",
      "name": "Get Current Theme",
      "beats": [
        {
          "beat": 1,
          "event": "app:ui:theme:get",
          "title": "Get Current Theme",
          "dynamics": "mf",
          "handler": "getCurrentTheme",
          "timing": "immediate",
          "kind": "stage-crew",
          "scenario": "Retrieve Current Application Theme Configuration",
          "acceptanceCriteria": [
            "Given the theme system is initialized\nWhen getCurrentTheme is called\nThen current theme (dark/light) is returned within 10ms\nAnd theme preference from localStorage is respected\nAnd default theme is applied if no preference exists",
            "Given user has theme preference saved\nWhen getCurrentTheme executes\nThen saved preference is returned\nAnd the response includes theme metadata (colors, fonts)\nAnd no API calls are made (cached lookup)",
            "Given theme system encounters error\nWhen getCurrentTheme fails\nThen fallback default theme is returned\nAnd error is logged for monitoring\nAnd system remains functional",
            "Given performance SLA of 10ms\nWhen getCurrentTheme completes\nThen operation time is < 10ms\nAnd memory footprint is < 100KB\nAnd no memory leaks occur on repeated calls",
            "Given concurrent requests for theme\nWhen multiple calls occur\nThen all requests return consistent value\nAnd response time remains < 10ms per request\nAnd no race conditions exist"
          ],
          "userStory": "As an engineer, I need `getCurrentTheme` to read persisted theme and apply classes.",
          "testCase": "should have required metadata fields",
          "testFile": "node_modules\\@renderx-plugins\\digital-assets\\tests\\themes.test.js"
        },
        {
          "beat": 2,
          "event": "app:ui:theme:notify",
          "title": "Notify UI",
          "dynamics": "mf",
          "handler": "notifyUi",
          "timing": "immediate",
          "kind": "pure",
          "scenario": "Publish UI State Change Notifications to Event System",
          "acceptanceCriteria": [
            "Given a class change operation completes\nWhen notifyUi is invoked with change details\nThen an event is published to the central EventRouter within 5ms\nAnd the event contains element ID, action (add/remove), and class name\nAnd the event is stamped with microsecond-precision timestamp",
            "Given multiple class operations occur in sequence\nWhen notifyUi publishes events\nThen events are queued in FIFO order\nAnd subscribers receive events in the order they occurred\nAnd no events are dropped or duplicated",
            "Given a subscriber is registered for UI change events\nWhen notifyUi publishes\nThen the subscriber receives the event within 20ms\nAnd the subscriber can act on the notification\nAnd multiple subscribers can consume the same event",
            "Given the event system is congested\nWhen notifyUi attempts to publish\nThen the event is queued with backpressure\nAnd the operation does not block the caller\nAnd events are eventually delivered with bounded latency",
            "Given notification occurs during error conditions\nWhen notifyUi is called\nThen events are still published for traceability\nAnd error context is included in event payload\nAnd the system can reconstruct the failure chain from events"
          ],
          "userStory": "As an orchestrator, I need `notifyUi` to publish theme state in <20ms.",
          "testCase": "exports CanvasPage and register()",
          "testFile": "node_modules\\@renderx-plugins\\canvas\\__tests__\\ui.export.spec.ts"
        }
      ],
      "userStory": "As a UI runtime engineer, I need theme retrieval to load and apply preferences without blocking initial render (≤1s P95).",
      "persona": "UI runtime engineer",
      "businessValue": "Enables instant theme switching; reduces user-perceived latency; supports dark mode preference with < 10ms detection"
    }
  ],
  "beats": 2,
  "userStory": "As a UI runtime engineer, I need theme retrieval to load and apply preferences without blocking initial render (≤1s P95).",
  "persona": "UI runtime engineer",
  "businessValue": "Enables instant theme switching; reduces user-perceived latency; supports dark mode preference with < 10ms detection"
}
