# OgraphX SAS - Architecture Clarification

## Critical Distinction: Source vs Auto-Generated

### The Correction

**Initial (Incorrect)**: All code and generated content in `.ographx/`  
**Corrected (Correct)**: Source code in `packages/ographx/`, auto-generated in `.ographx/`

This is a **critical architectural distinction** that must be maintained.

---

## ğŸ“‚ Directory Organization

### Source Code: `packages/ographx/`

**Purpose**: Version-controlled source code and documentation  
**Contents**: All code, scripts, and documentation that developers write  
**Git**: âœ… Version controlled  
**Regenerable**: âŒ Not regenerable (source of truth)

```
packages/ographx/
â”‚
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ ographx_ts.py              # TypeScript extractor (source)
â”‚   â”œâ”€â”€ ographx_py.py              # Python extractor (source)
â”‚   â””â”€â”€ README.md                  # Documentation (source)
â”‚
â”œâ”€â”€ generators/
â”‚   â”œâ”€â”€ generate_self_sequences.py # Sequence generator (source)
â”‚   â”œâ”€â”€ generate_orchestration_diagram.py
â”‚   â”œâ”€â”€ generate_sequence_flow.py
â”‚   â”œâ”€â”€ convert_to_svg.py
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ analysis/
â”‚   â”œâ”€â”€ analyze_self_graph.py      # Analysis tools (source)
â”‚   â”œâ”€â”€ show_sequences.py
â”‚   â”œâ”€â”€ show_rich_sequence.py
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ inter-awareness/
â”‚   â”œâ”€â”€ conductor_analyzer.py      # Future analyzers (source)
â”‚   â”œâ”€â”€ plugin_analyzer.py
â”‚   â”œâ”€â”€ shell_analyzer.py
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ ARCHITECTURE_ROADMAP.md    # Documentation (source)
â”‚   â”œâ”€â”€ MEDITATION_GUIDE.md
â”‚   â”œâ”€â”€ QUICK_START.md
â”‚   â”œâ”€â”€ GUIDES/
â”‚   â”‚   â”œâ”€â”€ SVG_CONVERSION_GUIDE.md
â”‚   â”‚   â”œâ”€â”€ VISUALIZATION_GUIDE.md
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ regenerate_all.sh          # Utility scripts (source)
â”‚   â”œâ”€â”€ watch_and_regenerate.sh
â”‚   â””â”€â”€ README.md
â”‚
â””â”€â”€ README.md                       # Main entry point (source)
```

### Auto-Generated: `.ographx/`

**Purpose**: Generated artifacts and temporary outputs  
**Contents**: All files generated by running source code  
**Git**: âŒ NOT version controlled (in .gitignore)  
**Regenerable**: âœ… Regenerable from source

```
.ographx/
â”‚
â”œâ”€â”€ self-observation/
â”‚   â”œâ”€â”€ self_graph.json            # Generated IR (auto-generated)
â”‚   â””â”€â”€ generate_self_graph.sh     # Generation script (source)
â”‚
â”œâ”€â”€ sequences/
â”‚   â””â”€â”€ self_sequences.json        # Generated sequences (auto-generated)
â”‚
â”œâ”€â”€ visualization/
â”‚   â”œâ”€â”€ diagrams/
â”‚   â”‚   â”œâ”€â”€ summary_diagram.md     # Generated diagrams (auto-generated)
â”‚   â”‚   â”œâ”€â”€ orchestration_diagram.md
â”‚   â”‚   â”œâ”€â”€ call_graph_diagram.md
â”‚   â”‚   â”œâ”€â”€ sequence_flow_diagram.md
â”‚   â”‚   â”œâ”€â”€ beat_timeline.md
â”‚   â”‚   â””â”€â”€ *.svg                  # Generated SVG (auto-generated)
â”‚   â””â”€â”€ README.md
â”‚
â””â”€â”€ .gitignore                     # Ignore all auto-generated files
```

---

## ğŸ”„ Data Flow

```
Source Code (packages/ographx/)
    â†“
core/ographx_ts.py
    â†“
.ographx/self-observation/self_graph.json (auto-generated)
    â†“
generators/generate_self_sequences.py
    â†“
.ographx/sequences/self_sequences.json (auto-generated)
    â†“
generators/generate_orchestration_diagram.py
    â†“
.ographx/visualization/diagrams/*.md (auto-generated)
    â†“
generators/convert_to_svg.py
    â†“
.ographx/visualization/diagrams/*.svg (auto-generated)
    â†“
analysis/analyze_self_graph.py
    â†“
Insights & Metrics
```

---

## âœ… Why This Matters

### 1. Clear Separation of Concerns
- **Source**: What developers write and maintain
- **Generated**: What tools produce from source

### 2. Version Control Clarity
- **Source**: Always version controlled
- **Generated**: Never version controlled (regenerable)

### 3. Regeneration Pipeline
- **Source**: Run generators to produce artifacts
- **Generated**: Delete and regenerate anytime

### 4. Scalability
- **Source**: Easy to add new generators
- **Generated**: Automatically organized by layer

### 5. Maintenance
- **Source**: Developers modify source code
- **Generated**: Developers never modify generated files

---

## ğŸ“‹ Migration Checklist

### Phase 1: Create Source Directories (packages/ographx/)
- [ ] Create `core/`
- [ ] Create `generators/`
- [ ] Create `analysis/`
- [ ] Create `inter-awareness/`
- [ ] Create `docs/`
- [ ] Create `scripts/`

### Phase 2: Move Source Files
- [ ] Move `ographx_ts.py` â†’ `packages/ographx/core/`
- [ ] Move `ographx_py.py` â†’ `packages/ographx/core/`
- [ ] Move `generate_self_sequences.py` â†’ `packages/ographx/generators/`
- [ ] Move `generate_orchestration_diagram.py` â†’ `packages/ographx/generators/`
- [ ] Move `generate_sequence_flow.py` â†’ `packages/ographx/generators/`
- [ ] Move `convert_to_svg.py` â†’ `packages/ographx/generators/`
- [ ] Move `analyze_self_graph.py` â†’ `packages/ographx/analysis/`
- [ ] Move `show_sequences.py` â†’ `packages/ographx/analysis/`
- [ ] Move `show_rich_sequence.py` â†’ `packages/ographx/analysis/`
- [ ] Move documentation files â†’ `packages/ographx/docs/`
- [ ] Move scripts â†’ `packages/ographx/scripts/`

### Phase 3: Create Auto-Generated Directories (.ographx/)
- [ ] Create `.ographx/self-observation/`
- [ ] Create `.ographx/sequences/`
- [ ] Create `.ographx/visualization/diagrams/`

### Phase 4: Move Auto-Generated Files
- [ ] Move `self_graph.json` â†’ `.ographx/self-observation/`
- [ ] Move `self_sequences.json` â†’ `.ographx/sequences/`
- [ ] Move `*_diagram.md` â†’ `.ographx/visualization/diagrams/`
- [ ] Move `*.svg` â†’ `.ographx/visualization/diagrams/`

### Phase 5: Create .gitignore
- [ ] Create `.ographx/.gitignore` to ignore auto-generated files

### Phase 6: Update References
- [ ] Update import paths in Python scripts
- [ ] Update relative paths in documentation
- [ ] Update shell scripts

### Phase 7: Testing
- [ ] Test regeneration pipeline
- [ ] Verify all imports work
- [ ] Verify all documentation links work

### Phase 8: Commit
- [ ] Commit restructuring to main branch

---

## ğŸ¯ Key Principles

### 1. Source of Truth
- **Source code** is the source of truth
- **Generated files** are derived from source

### 2. Version Control
- **Source code**: Always version controlled
- **Generated files**: Never version controlled

### 3. Regeneration
- **Source code**: Never regenerated
- **Generated files**: Always regenerable

### 4. Modification
- **Source code**: Developers modify directly
- **Generated files**: Developers never modify directly

### 5. Organization
- **Source code**: Organized by layer and purpose
- **Generated files**: Organized by layer and type

---

## ğŸ“Š Summary

| Aspect | Source (packages/ographx/) | Auto-Generated (.ographx/) |
|--------|---------------------------|---------------------------|
| **Purpose** | Developer code & docs | Generated artifacts |
| **Git** | âœ… Version controlled | âŒ In .gitignore |
| **Regenerable** | âŒ No | âœ… Yes |
| **Modify** | âœ… Developers modify | âŒ Never modify |
| **Organization** | By layer & purpose | By layer & type |
| **Ownership** | Developers | Generators |

---

## ğŸš€ Next Steps

1. âœ… Understand the distinction
2. ğŸ“‹ Review updated documentation
3. ğŸ“‹ Execute migration (12 phases)
4. ğŸ“‹ Test regeneration pipeline
5. ğŸ“‹ Commit to main branch

---

**Status**: ğŸ“‹ Ready for Implementation  
**Version**: SAS Architecture v1.1 (Corrected)  
**Date**: 2025-11-12  
**Meditation**: Source and generated are two sides of the same coin.

